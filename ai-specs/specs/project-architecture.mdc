---
description: Arquitectura modular de Aurora Nova con separaciÃ³n de zonas (Admin, Public, Shared) y patrÃ³n Container/Presentation. Define la estructura, patrones de componentes y directrices para desarrollo.
globs: ["src/modules/**/*", "src/app/**/*", "src/components/**/*"]
alwaysApply: true
---

# Arquitectura Modular de Aurora Nova

## Tabla de Contenidos

- [RelaciÃ³n con EstÃ¡ndares Base](#relaciÃ³n-con-estÃ¡ndares-base)
- [VisiÃ³n General](#visiÃ³n-general)
- [Estructura de MÃ³dulos](#estructura-de-mÃ³dulos)
- [DescripciÃ³n de Zonas](#descripciÃ³n-de-zonas)
- [PatrÃ³n Container/Presentation](#patrÃ³n-containerpresentation)
- [ProtecciÃ³n de Rutas](#protecciÃ³n-de-rutas)
- [Patrones de Componentes](#patrones-de-componentes)
- [Crecimiento Futuro](#crecimiento-futuro)
- [Ejemplos PrÃ¡cticos](#ejemplos-prÃ¡cticos)

---

## RelaciÃ³n con EstÃ¡ndares Base

**âš ï¸ IMPORTANTE**: Este documento es **complementario** a los estÃ¡ndares definidos en `base-standards.mdc`.

**Cadena de lectura obligatoria** para trabajar en Aurora Nova:

1. **[base-standards.mdc](./base-standards.mdc)** - Principios fundamentales de desarrollo (tareas pequeÃ±as, TDD, seguridad de tipos, etc.)
2. **[nextjs-standards.mdc](./nextjs-standards.mdc)** - EstÃ¡ndares genÃ©ricos de Next.js 16+ (arquitectura en capas, patrÃ³n repositorio, etc.)
3. **[project-architecture.mdc](./project-architecture.mdc)** â† **TÃš ESTÃS AQUÃ** - Decisiones arquitectÃ³nicas especÃ­ficas de Aurora Nova (mÃ³dulos, Container/Presentation)

**Â¿Por quÃ© esta estructura?**
- `base-standards.mdc` y `nextjs-standards.mdc` son **genÃ©ricos y reutilizables** en otros proyectos
- `project-architecture.mdc` es **especÃ­fico de Aurora Nova** y complementa los estÃ¡ndares base
- Cualquier agente de IA que inicie por `base-standards.mdc` encontrarÃ¡ la referencia a este documento

---

## VisiÃ³n General

Aurora Nova estÃ¡ estructurada en **mÃ³dulos independientes** por zona de acceso, permitiendo que equipos de desarrollo trabajen en paralelo con total independencia. Cada zona tiene su propia estructura, componentes y lÃ³gica, minimizando el acoplamiento.

### Principios Rectores

1. **Independencia**: Cada zona evolucionan con ritmos y requisitos diferentes
2. **ReutilizaciÃ³n**: Componentes presentacionales agnÃ³sticos se reutilizan en mÃºltiples zonas
3. **Mantenibilidad**: SeparaciÃ³n clara de responsabilidades mediante Container/Presentation
4. **Escalabilidad**: Estructura lista para crecimiento sin refactorizaciones mayores
5. **Testing**: Componentes presentacionales fÃ¡ciles de testear, lÃ³gica de contenedores aislable

---

## Estructura de MÃ³dulos

```
src/
â”œâ”€â”€ modules/
â”‚   â”œâ”€â”€ admin/                    # ğŸ” Zona administrativa
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ containers/       # Smart components (contienen lÃ³gica admin)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AppSidebarContainer.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LoginFormContainer.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UserManagementContainer.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚   â””â”€â”€ presentational/   # Dumb components (sin lÃ³gica)
â”‚   â”‚   â”‚       â”œâ”€â”€ LoginForm.tsx
â”‚   â”‚   â”‚       â”œâ”€â”€ UserMenu.tsx
â”‚   â”‚   â”‚       â”œâ”€â”€ DashboardStats.tsx
â”‚   â”‚   â”‚       â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ pages/                # PÃ¡ginas admin
â”‚   â”‚   â”œâ”€â”€ hooks/                # Hooks especÃ­ficos de admin
â”‚   â”‚   â”œâ”€â”€ services/             # LÃ³gica de negocio admin
â”‚   â”‚   â”œâ”€â”€ types/                # Tipos y interfaces admin
â”‚   â”‚   â””â”€â”€ layout/               # Layout admin
â”‚   â”‚
â”‚   â”œâ”€â”€ public/                   # ğŸŒ Zona pÃºblica
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ containers/       # Smart components (lÃ³gica pÃºblica)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PublicNavbarContainer.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SocialLoginContainer.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚   â””â”€â”€ presentational/   # Componentes reutilizables
â”‚   â”‚   â”‚       â”œâ”€â”€ LoginForm.tsx # Mismo LoginForm que admin
â”‚   â”‚   â”‚       â”œâ”€â”€ Navbar.tsx
â”‚   â”‚   â”‚       â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ layout/
â”‚   â”‚
â”‚   â””â”€â”€ shared/                   # ğŸ“¦ CÃ³digo compartido
â”‚       â”œâ”€â”€ components/
â”‚       â”‚   â”œâ”€â”€ ui/               # shadcn/ui, Button, Card, etc. (agnÃ³sticos)
â”‚       â”‚   â”œâ”€â”€ layout/
â”‚       â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ hooks/                # Hooks genÃ©ricos
â”‚       â”œâ”€â”€ utils/                # Funciones de utilidad
â”‚       â”œâ”€â”€ types/                # Tipos globales
â”‚       â””â”€â”€ api/                  # Clientes HTTP, fetchers
â”‚
â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”œâ”€â”€ admin/
â”‚   â”‚   â”œâ”€â”€ layout.tsx            # Layout base (sin validaciÃ³n)
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”œâ”€â”€ signin/page.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ forgot-password/page.tsx
â”‚   â”‚   â”‚   â””â”€â”€ reset-password/page.tsx
â”‚   â”‚   â””â”€â”€ (protected)/          # Route group
â”‚   â”‚       â”œâ”€â”€ layout.tsx        # Valida sesiÃ³n
â”‚   â”‚       â”œâ”€â”€ dashboard/page.tsx
â”‚   â”‚       â”œâ”€â”€ users/page.tsx
â”‚   â”‚       â”œâ”€â”€ roles/page.tsx
â”‚   â”‚       â”œâ”€â”€ permissions/page.tsx
â”‚   â”‚       â”œâ”€â”€ settings/page.tsx
â”‚   â”‚       â””â”€â”€ audit/page.tsx
â”‚   â”‚
â”‚   â””â”€â”€ (public)/                 # Route group (prÃ³xima fase)
â”‚       â”œâ”€â”€ layout.tsx
â”‚       â”œâ”€â”€ page.tsx              # Home pÃºblico
â”‚       â”œâ”€â”€ products/page.tsx
â”‚       â””â”€â”€ about/page.tsx
â”‚
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ (admin)/
â”‚   â”‚   â”œâ”€â”€ users/route.ts
â”‚   â”‚   â”œâ”€â”€ roles/route.ts
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ (public)/
â”‚   â”‚   â”œâ”€â”€ products/route.ts
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ (shared)/
â”‚       â”œâ”€â”€ auth/route.ts
â”‚       â””â”€â”€ ...
```

---

## DescripciÃ³n de Zonas

### ğŸ” Zona Admin (`modules/admin/`)

**PropÃ³sito:** GestiÃ³n y administraciÃ³n del sistema (usuarios, roles, permisos, auditorÃ­a)

**CaracterÃ­sticas:**
- âœ… AutenticaciÃ³n requerida
- âœ… ValidaciÃ³n de permisos granular
- âœ… URLs: `/admin/*`
- âœ… Layout: `src/app/admin/(protected)/layout.tsx`
- âœ… Componentes especÃ­ficos (AppSidebar, AdminDashboard, etc.)

**Equipo:** Backend + Devops, Desarrollador Senior Admin

**Ritmo:** Actualizaciones menos frecuentes, cambios estructurales importantes

---

### ğŸŒ Zona PÃºblica (`modules/public/`)

**PropÃ³sito:** Interfaz para visitantes y clientes (sin login o con login social)

**CaracterÃ­sticas:**
- âœ… Accesible sin autenticaciÃ³n
- âœ… Login social (Google, Facebook)
- âœ… URLs: `/` y `/(public)/*`
- âœ… Layout: `src/app/(public)/layout.tsx` (sin validaciÃ³n de sesiÃ³n)
- âœ… Componentes como Navbar, ProductCatalog, etc.

**Equipo:** Frontend, UX/Design, Product

**Ritmo:** Actualizaciones frecuentes, iteraciones Ã¡giles

---

### ğŸ“¦ Zona Compartida (`modules/shared/`)

**PropÃ³sito:** Componentes y utilidades reutilizables entre zonas

**Contenido:**
- **`components/ui/`**: Botones, Cards, Inputs, Modales (sin lÃ³gica)
- **`hooks/`**: useForm, useDebounce, useAuth, etc.
- **`api/`**: Cliente HTTP, fetchers globales
- **`utils/`**: Funciones de formateo, validaciÃ³n, helpers
- **`types/`**: Tipos TypeScript globales

---

## PatrÃ³n Container/Presentation

Este patrÃ³n separa la **lÃ³gica** (Container) de la **presentaciÃ³n** (Presentation), permitiendo reutilizaciÃ³n y testing independiente.

### Componente Presentacional (Dumb)

```typescript
// modules/shared/components/LoginForm.tsx
import { Button } from '@/modules/shared/components/ui/button'
import { Input } from '@/modules/shared/components/ui/input'

interface LoginFormProps {
  email: string
  password: string
  errors?: Record<string, string[]>
  isLoading?: boolean
  onEmailChange: (value: string) => void
  onPasswordChange: (value: string) => void
  onSubmit: (e: React.FormEvent) => void
  onForgotPassword: () => void
}

export function LoginForm({
  email,
  password,
  errors,
  isLoading,
  onEmailChange,
  onPasswordChange,
  onSubmit,
  onForgotPassword,
}: LoginFormProps) {
  return (
    <form onSubmit={onSubmit} className="space-y-6">
      <div>
        <label htmlFor="email">Email</label>
        <Input
          id="email"
          type="email"
          value={email}
          onChange={(e) => onEmailChange(e.target.value)}
          disabled={isLoading}
          error={errors?.email?.[0]}
        />
      </div>

      <div>
        <label htmlFor="password">ContraseÃ±a</label>
        <Input
          id="password"
          type="password"
          value={password}
          onChange={(e) => onPasswordChange(e.target.value)}
          disabled={isLoading}
          error={errors?.password?.[0]}
        />
      </div>

      <Button type="submit" disabled={isLoading} fullWidth>
        {isLoading ? 'Iniciando sesiÃ³n...' : 'Iniciar sesiÃ³n'}
      </Button>

      <button
        type="button"
        onClick={onForgotPassword}
        className="text-sm text-blue-600"
      >
        Â¿Olvidaste tu contraseÃ±a?
      </button>
    </form>
  )
}
```

**CaracterÃ­sticas:**
- âœ… Sin `"use client"` (Server Component compatible)
- âœ… Recibe **todos los datos como props**
- âœ… Recibe **callbacks como props** (onSubmit, onChange, etc.)
- âœ… NO conoce URLs, rutas ni lÃ³gica de negocio
- âœ… FÃ¡cil de testear (propiedades predecibles)
- âœ… Reutilizable en Admin y Public con comportamientos distintos

---

### Contenedor Admin (Smart)

```typescript
// modules/admin/components/containers/LoginFormContainer.tsx
"use client"

import { useState } from 'react'
import { useRouter } from 'next/navigation'
import { LoginForm } from '@/modules/shared/components/LoginForm'
import { loginUser } from '@/actions/auth'
import type { LoginInput } from '@/lib/validations/auth'

export function AdminLoginFormContainer() {
  const router = useRouter()
  const [formData, setFormData] = useState<LoginInput>({
    email: '',
    password: '',
  })
  const [errors, setErrors] = useState<Record<string, string[]>>({})
  const [isLoading, setIsLoading] = useState(false)

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()
    setIsLoading(true)

    try {
      const result = await loginUser(formData)

      if (result.success) {
        // Redirigir a /admin/dashboard (lÃ³gica admin)
        router.push(result.data?.redirectUrl || '/admin/dashboard')
        router.refresh()
      } else {
        setErrors(result.fieldErrors || {})
      }
    } finally {
      setIsLoading(false)
    }
  }

  const handleForgotPassword = () => {
    // Redirigir a ruta admin (lÃ³gica admin)
    router.push('/admin/auth/forgot-password')
  }

  return (
    <LoginForm
      email={formData.email}
      password={formData.password}
      errors={errors}
      isLoading={isLoading}
      onEmailChange={(email) => setFormData({ ...formData, email })}
      onPasswordChange={(password) => setFormData({ ...formData, password })}
      onSubmit={handleSubmit}
      onForgotPassword={handleForgotPassword}
    />
  )
}
```

**CaracterÃ­sticas:**
- âœ… `"use client"` (necesita interactividad)
- âœ… **Contiene lÃ³gica especÃ­fica de Admin**:
  - URLs admin: `/admin/dashboard`, `/admin/auth/forgot-password`
  - Actions de autenticaciÃ³n admin
  - Redirecciones admin-especÃ­ficas
- âœ… Maneja estado local
- âœ… Llama al componente presentacional con props

---

### Contenedor PÃºblico (Smart - Futuro)

```typescript
// modules/public/components/containers/PublicLoginFormContainer.tsx
"use client"

import { useState } from 'react'
import { useRouter } from 'next/navigation'
import { LoginForm } from '@/modules/shared/components/LoginForm'
import { loginWithSocial } from '@/modules/public/services/auth'

export function PublicLoginFormContainer() {
  const router = useRouter()
  const [formData, setFormData] = useState({ email: '', password: '' })
  const [errors, setErrors] = useState<Record<string, string[]>>({})
  const [isLoading, setIsLoading] = useState(false)

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()
    setIsLoading(true)

    try {
      const result = await loginWithSocial(formData)

      if (result.success) {
        // Redirigir a /account/dashboard (lÃ³gica pÃºblica)
        router.push('/account/dashboard')
        router.refresh()
      } else {
        setErrors(result.fieldErrors || {})
      }
    } finally {
      setIsLoading(false)
    }
  }

  const handleForgotPassword = () => {
    // Redirigir a ruta pÃºblica (lÃ³gica pÃºblica)
    router.push('/auth/forgot-password')
  }

  return (
    <LoginForm
      email={formData.email}
      password={formData.password}
      errors={errors}
      isLoading={isLoading}
      onEmailChange={(email) => setFormData({ ...formData, email })}
      onPasswordChange={(password) => setFormData({ ...formData, password })}
      onSubmit={handleSubmit}
      onForgotPassword={handleForgotPassword}
    />
  )
}
```

**Diferencias Clave:**
- URLs pÃºblicas: `/account/dashboard`, `/auth/forgot-password`
- Servicio de autenticaciÃ³n distinto: `loginWithSocial`
- LÃ³gica especÃ­fica de zona pÃºblica
- **Mismo componente presentacional LoginForm**

---

## ProtecciÃ³n de Rutas

### Nivel 1: AutenticaciÃ³n Global (proxy.ts)

```typescript
// src/proxy.ts
const publicRoutes = [
  "/",                                // Home (puede redirigir)
  "/admin/auth/signin",               // Login admin
  "/admin/auth/forgot-password",      // Recuperar password admin
  "/admin/auth/reset-password",       // Reiniciar password admin
  "/auth/signup",                     // Signup pÃºblico (futuro)
  "/auth/error",                      // PÃ¡gina de error
]

// Cualquier otra ruta â†’ requiere autenticaciÃ³n
// Sin sesiÃ³n â†’ redirige a /admin/auth/signin
```

### Nivel 2: ValidaciÃ³n por Grupo (layout.tsx)

**Para zona Admin protegida:**

```typescript
// src/app/admin/(protected)/layout.tsx
import { auth } from "@/lib/auth"
import { redirect } from "next/navigation"
import { requireAnyPermission } from "@/lib/server/require-permission"
import { NotAuthorized } from "@/components/auth/not-authorized"

export default async function AdminLayout({ children }) {
  const session = await auth()

  if (!session?.user) {
    redirect("/admin/auth/signin")  // Ya redirigido por proxy
  }

  try {
    await requireAnyPermission(['system:admin'])
  } catch (error) {
    return <NotAuthorized />
  }

  return children
}
```

**Para zona PÃºblica (sin protecciÃ³n):**

```typescript
// src/app/(public)/layout.tsx
export default function PublicLayout({ children }) {
  // Sin validaciÃ³n de sesiÃ³n
  // Accesible para todos
  return children
}
```

---

## Patrones de Componentes

### 1. Componentes Presentacionales Simples

```typescript
// UbicaciÃ³n: modules/shared/components/ui/Button.tsx
interface ButtonProps {
  children: React.ReactNode
  onClick?: () => void
  disabled?: boolean
  variant?: 'primary' | 'secondary'
  className?: string
}

export function Button({ children, variant = 'primary', ...props }: ButtonProps) {
  const variantClasses = {
    primary: 'bg-blue-600 hover:bg-blue-700',
    secondary: 'bg-gray-200 hover:bg-gray-300',
  }

  return (
    <button
      className={`px-4 py-2 rounded ${variantClasses[variant]} ${props.className || ''}`}
      {...props}
    >
      {children}
    </button>
  )
}
```

### 2. Hooks Compartidos

```typescript
// UbicaciÃ³n: modules/shared/hooks/useForm.ts
import { useState, useCallback } from 'react'

export function useForm<T extends Record<string, any>>(initialValues: T) {
  const [values, setValues] = useState(initialValues)
  const [errors, setErrors] = useState<Record<string, string[]>>({})

  const handleChange = useCallback((field: string, value: any) => {
    setValues(prev => ({ ...prev, [field]: value }))
    if (errors[field]) {
      setErrors(prev => {
        const newErrors = { ...prev }
        delete newErrors[field]
        return newErrors
      })
    }
  }, [errors])

  return { values, errors, setErrors, handleChange }
}
```

### 3. Services EspecÃ­ficos de Zona

```typescript
// UbicaciÃ³n: modules/admin/services/user-service.ts
import { api } from '@/modules/shared/api/client'

export const adminUserService = {
  async getAll() {
    return api.get('/api/admin/users')
  },

  async create(data: CreateUserInput) {
    return api.post('/api/admin/users', data)
  },

  async delete(id: string) {
    return api.delete(`/api/admin/users/${id}`)
  },
}
```

---

## Crecimiento Futuro

### Fase Actual (Hecho âœ…)
```
Admin
â”œâ”€â”€ Components (Presentacionales + Containers)
â”œâ”€â”€ Pages
â””â”€â”€ Services

Shared
â”œâ”€â”€ UI Components
â”œâ”€â”€ Hooks
â””â”€â”€ Utils
```

### Fase 2 (PrÃ³xima - Public)
```
Public
â”œâ”€â”€ Components (Presentacionales + Containers)
â”œâ”€â”€ Pages
â”œâ”€â”€ Services
â””â”€â”€ Hooks

+
Auth (Shared - actualizado)
â”œâ”€â”€ Actions
â”œâ”€â”€ Types
â””â”€â”€ Validations
```

### Fase 3 (Si crece mÃ¡s)
```
Customer Portal
â”œâ”€â”€ Components
â”œâ”€â”€ Pages
â”œâ”€â”€ Services
â””â”€â”€ Types

+
Mobile App
â”œâ”€â”€ API client compatible
â””â”€â”€ Reutiliza modules/shared
```

---

## Ejemplos PrÃ¡cticos

### Agregando Nueva Funcionalidad a Admin

**Paso 1:** Crear componente presentacional

```typescript
// modules/shared/components/UserCard.tsx
export interface UserCardProps {
  id: string
  name: string
  email: string
  role: string
  onEdit: (id: string) => void
  onDelete: (id: string) => void
}

export function UserCard({
  id,
  name,
  email,
  role,
  onEdit,
  onDelete,
}: UserCardProps) {
  return (
    <div className="p-4 border rounded">
      <h3>{name}</h3>
      <p>{email}</p>
      <p className="text-sm text-gray-500">{role}</p>
      <div className="flex gap-2 mt-4">
        <button onClick={() => onEdit(id)}>Editar</button>
        <button onClick={() => onDelete(id)}>Eliminar</button>
      </div>
    </div>
  )
}
```

**Paso 2:** Crear contenedor para Admin

```typescript
// modules/admin/components/containers/UserListContainer.tsx
"use client"

import { useEffect, useState } from 'react'
import { useRouter } from 'next/navigation'
import { UserCard } from '@/modules/shared/components/UserCard'
import { adminUserService } from '@/modules/admin/services/user-service'

export function AdminUserListContainer() {
  const router = useRouter()
  const [users, setUsers] = useState([])
  const [loading, setLoading] = useState(true)

  useEffect(() => {
    adminUserService.getAll().then(setUsers).finally(() => setLoading(false))
  }, [])

  const handleEdit = (id: string) => {
    router.push(`/admin/users/${id}/edit`)  // Ruta admin
  }

  const handleDelete = async (id: string) => {
    await adminUserService.delete(id)
    setUsers(users.filter(u => u.id !== id))
  }

  if (loading) return <div>Cargando...</div>

  return (
    <div className="grid gap-4">
      {users.map(user => (
        <UserCard
          key={user.id}
          {...user}
          onEdit={handleEdit}
          onDelete={handleDelete}
        />
      ))}
    </div>
  )
}
```

**Paso 3:** Usar en pÃ¡gina Admin

```typescript
// src/app/admin/(protected)/users/page.tsx
import { AdminUserListContainer } from '@/modules/admin/components/containers/UserListContainer'

export default function AdminUsersPage() {
  return (
    <div>
      <h1>GestiÃ³n de Usuarios</h1>
      <AdminUserListContainer />
    </div>
  )
}
```

---

## Resumen de Convenciones

| Aspecto | UbicaciÃ³n | DescripciÃ³n |
|---------|-----------|------------|
| **Componentes Presentacionales** | `modules/shared/components/` | AgnÃ³sticos, reutilizables, sin lÃ³gica |
| **Contenedores Admin** | `modules/admin/components/containers/` | LÃ³gica admin, URLs admin, redirecciones |
| **Contenedores PÃºblico** | `modules/public/components/containers/` | LÃ³gica pÃºblica, URLs pÃºblicas, redirecciones |
| **PÃ¡ginas Admin** | `src/app/admin/(protected)/**/page.tsx` | PÃ¡ginas administrativas protegidas |
| **PÃ¡ginas PÃºblicas** | `src/app/(public)/**/page.tsx` | PÃ¡ginas pÃºblicas sin protecciÃ³n |
| **Services Admin** | `modules/admin/services/` | LÃ³gica de negocio admin |
| **Services Public** | `modules/public/services/` | LÃ³gica de negocio pÃºblico |
| **Hooks Compartidos** | `modules/shared/hooks/` | useForm, useDebounce, etc. |
| **UI Components** | `modules/shared/components/ui/` | Button, Input, Card, Dialog, etc. |
| **API Client** | `modules/shared/api/` | Cliente HTTP compartido |

---

## MigraciÃ³n Gradual

Como esta arquitectura se implementa **ahora antes de construir Public**, no hay migraciÃ³n necesaria. El cÃ³digo Admin existente puede ser movido a esta estructura en paralelo mientras se desarrolla Public de forma independiente.

**Timeline sugerido:**
1. Documentar esta arquitectura âœ… (actual)
2. Mantener Admin funcionando mientras se reorganiza gradualmente
3. Iniciar mÃ³dulo Public con la estructura correcta desde el inicio
4. Refactorizar Admin solo si es necesario

---

## AlineaciÃ³n con EstÃ¡ndares Base

Esta arquitectura modular complementa los estÃ¡ndares definidos en `base-standards.mdc` y `nextjs-standards.mdc`:

### Principios de base-standards.mdc que aplicamos aquÃ­

| Principio | AplicaciÃ³n en Aurora Nova |
|-----------|--------------------------|
| **Tareas pequeÃ±as, una a la vez** | Estructura modular permite que teams trabajen independientemente en Admin/Public sin conflictos |
| **Desarrollo Dirigido por Pruebas (TDD)** | Componentes presentacionales agnÃ³sticos son fÃ¡ciles de testear sin dependencias |
| **Seguridad de Tipos** | Cada mÃ³dulo define sus propios tipos, evitando contaminaciÃ³n cross-module |
| **Nomenclatura Clara** | Estructura clara: `containers/` vs `presentational/` hace obvio el propÃ³sito de cada componente |
| **DetecciÃ³n de Patrones** | Container/Presentation es un patrÃ³n identificado y documentado para evitar repeticiÃ³n |

### EstÃ¡ndares Next.js que respetamos

- **Arquitectura en Capas**: Los contenedores actÃºan como "Controllers", delegando a services y hooks
- **PatrÃ³n Repositorio**: Services en cada mÃ³dulo encapsulan acceso a APIs
- **ComunicaciÃ³n Frontend-API**: Componentes presentacionales NO acceden directamente a base de datos
- **ProtecciÃ³n de Rutas**: `proxy.ts` + layouts implementan autenticaciÃ³n global + autorizaciÃ³n granular

### Extensible a Arquitecturas Avanzadas (Futuro)

Si en el futuro Aurora Nova requiere patrones de `advanced-architecture.mdc`:
- La estructura modular es **compatible con DDD** (cada mÃ³dulo podrÃ­a ser un bounded context)
- Preparada para **Event-Driven Architecture** (events entre mÃ³dulos Admin/Public)
- Pronta para **Feature Flags** (activar/desactivar features por zona)

