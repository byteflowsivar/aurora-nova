
> app@0.1.0 dev
> next dev --turbopack

 âš  Port 3000 is in use by process 12367, using available port 3001 instead.
   â–² Next.js 15.5.6 (Turbopack)
   - Local:        http://localhost:3001
   - Network:      http://10.70.95.186:3001
   - Environments: .env.local, .env

 âœ“ Starting...
 âœ“ Compiled middleware in 317ms
 âœ“ Ready in 1448ms
 â—‹ Compiling /_not-found/page ...
 âœ“ Compiled /_not-found/page in 1629ms
 âš  ./src/lib/prisma/generated/runtime/wasm-engine-edge.js:14:7269
Ecmascript file had an error
[0m [90m 12 |[39m [32m[39m
 [90m 13 |[39m [32mIn Cloudflare module Workers, environment variables are available only in the Worker's \`env\` parameter of \`fetch\`.[39m
[31m[1m>[22m[39m[90m 14 |[39m [32mTo solve this, provide the connection string directly: https://pris.ly/d/cloudflare-datasource-url`[39m[33m,[39mn)[33m:[39m[36mnew[39m [33mI[39m([32m`error: Environment variable not found: ${s.fromEnvVar}.`[39m[33m,[39mn)[33m;[39m[36mif[39m(i[33m===[39m[36mvoid[39m [35m0[39m)[36mthrow[39m [36mnew[39m [33mI[39m([32m"error: Missing URL environment variable, value, or override."[39m[33m,[39mn)[33m;[39m[36mreturn[39m i}u()[33m;[39mc()[33m;[39mm()[33m;[39mp()[33m;[39md()[33m;[39ml()[33m;[39mu()[33m;[39mc()[33m;[39mm()[33m;[39mp()[33m;[39md()[33m;[39ml()[33m;[39m[36mfunction[39m go(t){[36mif[39m(t[33m?[39m[33m.[39mkind[33m===[39m[32m"itx"[39m)[36mreturn[39m t[33m.[39moptions[33m.[39mid}u()[33m;[39mc()[33m;[39mm()[33m;[39mp()[33m;[39md()[33m;[39ml()[33m;[39m[36mvar[39m nn[33m,[39myo[33m=[39m{[36masync[39m loadLibrary(t){[36mlet[39m{clientVersion[33m:[39me[33m,[39madapter[33m:[39mr[33m,[39mengineWasm[33m:[39mn}[33m=[39mt[33m;[39m[36mif[39m(r[33m===[39m[36mvoid[39m [35m0[39m)[36mthrow[39m [36mnew[39m [33mI[39m([32m`The \`adapter\` option for \`PrismaClient\` is required in this context (${Ze().prettyName})`[39m[33m,[39me)[33m;[39m[36mif[39m(n[33m===[39m[36mvoid[39m [35m0[39m)[36mthrow[39m [36mnew[39m [33mI[39m([32m"WASM engine was unexpectedly `undefined`"[39m[33m,[39me)[33m;[39mnn[33m===[39m[36mvoid[39m [35m0[39m[33m&&[39m(nn[33m=[39m([36masync[39m()[33m=>[39m{[36mlet[39m o[33m=[39m[36mawait[39m n[33m.[39mgetRuntime()[33m,[39ms[33m=[39m[36mawait[39m n[33m.[39mgetQueryEngineWasmModule()[33m;[39m[36mif[39m(s[33m==[39m[36mnull[39m)[36mthrow[39m [36mnew[39m [33mI[39m([32m"The loaded wasm module was unexpectedly `undefined` or `null` once loaded"[39m[33m,[39me)[33m;[39m[36mlet[39m a[33m=[39m{[32m"./query_engine_bg.js"[39m[33m:[39mo}[33m,[39mf[33m=[39m[36mnew[39m [33mWebAssembly[39m[33m.[39m[33mInstance[39m(s[33m,[39ma)[33m,[39mh[33m=[39mf[33m.[39mexports[33m.[39m__wbindgen_start[33m;[39m[36mreturn[39m o[33m.[39m__wbg_set_wasm(f[33m.[39mexports)[33m,[39mh()[33m,[39mo[33m.[39m[33mQueryEngine[39m})())[33m;[39m[36mlet[39m i[33m=[39m[36mawait[39m nn[33m;[39m[36mreturn[39m{debugPanic(){[36mreturn[39m [33mPromise[39m[33m.[39mreject([32m"{}"[39m)}[33m,[39mdmmf(){[36mreturn[39m [33mPromise[39m[33m.[39mresolve([32m"{}"[39m)}[33m,[39mversion(){[36mreturn[39m{commit[33m:[39m[32m"unknown"[39m[33m,[39mversion[33m:[39m[32m"unknown"[39m}}[33m,[39m[33mQueryEngine[39m[33m:[39mi}}}[33m;[39m[36mvar[39m [33mRl[39m[33m=[39m[32m"P2036"[39m[33m,[39mge[33m=[39m[33mG[39m([32m"prisma:client:libraryEngine"[39m)[33m;[39m[36mfunction[39m [33mSl[39m(t){[36mreturn[39m t[33m.[39mitem_type[33m===[39m[32m"query"[39m[33m&&[39m[32m"query"[39m[36min[39m t}[36mfunction[39m [33mOl[39m(t){[36mreturn[39m[32m"level"[39m[36min[39m t[33m?[39mt[33m.[39mlevel[33m===[39m[32m"error"[39m[33m&&[39mt[33m.[39mmessage[33m===[39m[32m"PANIC"[39m[33m:[39m[33m![39m[35m1[39m}[36mvar[39m oO[33m=[39m[[33m...[39mkr[33m,[39m[32m"native"[39m][33m,[39mkl[33m=[39m[35m0xffffffffffffffff[39mn[33m,[39mon[33m=[39m[35m1[39mn[33m;[39m[36mfunction[39m [33mDl[39m(){[36mlet[39m t[33m=[39mon[33m++[39m[33m;[39m[36mreturn[39m on[33m>[39mkl[33m&&[39m(on[33m=[39m[35m1[39mn)[33m,[39mt}[36mvar[39m [33mTt[39m[33m=[39m[36mclass[39m{name[33m=[39m[32m"LibraryEngine"[39m[33m;[39mengine[33m;[39mlibraryInstantiationPromise[33m;[39mlibraryStartingPromise[33m;[39mlibraryStoppingPromise[33m;[39mlibraryStarted[33m;[39mexecutingQueryPromise[33m;[39mconfig[33m;[39m[33mQueryEngineConstructor[39m[33m;[39mlibraryLoader[33m;[39mlibrary[33m;[39mlogEmitter[33m;[39mlibQueryEnginePath[33m;[39mbinaryTarget[33m;[39mdatasourceOverrides[33m;[39mdatamodel[33m;[39mlogQueries[33m;[39mlogLevel[33m;[39mlastQuery[33m;[39mloggerRustPanic[33m;[39mtracingHelper[33m;[39madapterPromise[33m;[39mversionInfo[33m;[39mconstructor(e[33m,[39mr){[36mthis[39m[33m.[39mlibraryLoader[33m=[39mr[33m?[39m[33m?[39myo[33m,[39m[36mthis[39m[33m.[39mconfig[33m=[39me[33m,[39m[36mthis[39m[33m.[39mlibraryStarted[33m=[39m[33m![39m[35m1[39m[33m,[39m[36mthis[39m[33m.[39mlogQueries[33m=[39me[33m.[39mlogQueries[33m?[39m[33m?[39m[33m![39m[35m1[39m[33m,[39m[36mthis[39m[33m.[39mlogLevel[33m=[39me[33m.[39mlogLevel[33m?[39m[33m?[39m[32m"error"[39m[33m,[39m[36mthis[39m[33m.[39mlogEmitter[33m=[39me[33m.[39mlogEmitter[33m,[39m[36mthis[39m[33m.[39mdatamodel[33m=[39me[33m.[39minlineSchema[33m,[39m[36mthis[39m[33m.[39mtracingHelper[33m=[39me[33m.[39mtracingHelper[33m,[39me[33m.[39menableDebugLogs[33m&&[39m([36mthis[39m[33m.[39mlogLevel[33m=[39m[32m"debug"[39m)[33m;[39m[36mlet[39m n[33m=[39m[33mObject[39m[33m.[39mkeys(e[33m.[39moverrideDatasources)[[35m0[39m][33m,[39mi[33m=[39me[33m.[39moverrideDatasources[n][33m?[39m[33m.[39murl[33m;[39mn[33m!==[39m[36mvoid[39m [35m0[39m[33m&&[39mi[33m!==[39m[36mvoid[39m [35m0[39m[33m&&[39m([36mthis[39m[33m.[39mdatasourceOverrides[33m=[39m{[n][33m:[39mi})[33m,[39m[36mthis[39m[33m.[39mlibraryInstantiationPromise[33m=[39m[36mthis[39m[33m.[39minstantiateLibrary()}wrapEngine(e){[36mreturn[39m{applyPendingMigrations[33m:[39me[33m.[39mapplyPendingMigrations[33m?[39m[33m.[39mbind(e)[33m,[39mcommitTransaction[33m:[39m[36mthis[39m[33m.[39mwithRequestId(e[33m.[39mcommitTransaction[33m.[39mbind(e))[33m,[39mconnect[33m:[39m[36mthis[39m[33m.[39mwithRequestId(e[33m.[39mconnect[33m.[39mbind(e))[33m,[39mdisconnect[33m:[39m[36mthis[39m[33m.[39mwithRequestId(e[33m.[39mdisconnect[33m.[39mbind(e))[33m,[39mmetrics[33m:[39me[33m.[39mmetrics[33m?[39m[33m.[39mbind(e)[33m,[39mquery[33m:[39m[36mthis[39m[33m.[39mwithRequestId(e[33m.[39mquery[33m.[39mbind(e))[33m,[39mrollbackTransaction[33m:[39m[36mthis[39m[33m.[39mwithRequestId(e[33m.[39mrollbackTransaction[33m.[39mbind(e))[33m,[39msdlSchema[33m:[39me[33m.[39msdlSchema[33m?[39m[33m.[39mbind(e)[33m,[39mstartTransaction[33m:[39m[36mthis[39m[33m.[39mwithRequestId(e[33m.[39mstartTransaction[33m.[39mbind(e))[33m,[39mtrace[33m:[39me[33m.[39mtrace[33m.[39mbind(e)[33m,[39mfree[33m:[39me[33m.[39mfree[33m?[39m[33m.[39mbind(e)}}withRequestId(e){[36mreturn[39m [36masync[39m([33m...[39mr)[33m=>[39m{[36mlet[39m n[33m=[39m[33mDl[39m()[33m.[39mtoString()[33m;[39m[36mtry[39m{[36mreturn[39m [36mawait[39m e([33m...[39mr[33m,[39mn)}[36mfinally[39m{[36mif[39m([36mthis[39m[33m.[39mtracingHelper[33m.[39misEnabled()){[36mlet[39m i[33m=[39m[36mawait[39m [36mthis[39m[33m.[39mengine[33m?[39m[33m.[39mtrace(n)[33m;[39m[36mif[39m(i){[36mlet[39m o[33m=[39m[33mJSON[39m[33m.[39mparse(i)[33m;[39m[36mthis[39m[33m.[39mtracingHelper[33m.[39mdispatchEngineSpans(o[33m.[39mspans)}}}}}[36masync[39m applyPendingMigrations(){[36mthrow[39m [36mnew[39m [33mError[39m([32m"Cannot call this method from this type of engine instance"[39m)}[36masync[39m transaction(e[33m,[39mr[33m,[39mn){[36mawait[39m [36mthis[39m[33m.[39mstart()[33m;[39m[36mlet[39m i[33m=[39m[36mawait[39m [36mthis[39m[33m.[39madapterPromise[33m,[39mo[33m=[39m[33mJSON[39m[33m.[39mstringify(r)[33m,[39ms[33m;[39m[36mif[39m(e[33m===[39m[32m"start"[39m){[36mlet[39m f[33m=[39m[33mJSON[39m[33m.[39mstringify({max_wait[33m:[39mn[33m.[39mmaxWait[33m,[39mtimeout[33m:[39mn[33m.[39mtimeout[33m,[39misolation_level[33m:[39mn[33m.[39misolationLevel})[33m;[39ms[33m=[39m[36mawait[39m [36mthis[39m[33m.[39mengine[33m?[39m[33m.[39mstartTransaction(f[33m,[39mo)}[36melse[39m e[33m===[39m[32m"commit"[39m[33m?[39ms[33m=[39m[36mawait[39m [36mthis[39m[33m.[39mengine[33m?[39m[33m.[39mcommitTransaction(n[33m.[39mid[33m,[39mo)[33m:[39me[33m===[39m[32m"rollback"[39m[33m&&[39m(s[33m=[39m[36mawait[39m [36mthis[39m[33m.[39mengine[33m?[39m[33m.[39mrollbackTransaction(n[33m.[39mid[33m,[39mo))[33m;[39m[36mlet[39m a[33m=[39m[36mthis[39m[33m.[39mparseEngineResponse(s)[33m;[39m[36mif[39m([33mIl[39m(a)){[36mlet[39m f[33m=[39m[36mthis[39m[33m.[39mgetExternalAdapterError(a[33m,[39mi[33m?[39m[33m.[39merrorRegistry)[33m;[39m[36mthrow[39m f[33m?[39mf[33m.[39merror[33m:[39m[36mnew[39m [33mZ[39m(a[33m.[39mmessage[33m,[39m{code[33m:[39ma[33m.[39merror_code[33m,[39mclientVersion[33m:[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion[33m,[39mmeta[33m:[39ma[33m.[39mmeta})}[36melse[39m [36mif[39m([36mtypeof[39m a[33m.[39mmessage[33m==[39m[32m"string"[39m)[36mthrow[39m [36mnew[39m [33mQ[39m(a[33m.[39mmessage[33m,[39m{clientVersion[33m:[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion})[33m;[39m[36mreturn[39m a}[36masync[39m instantiateLibrary(){[36mif[39m(ge([32m"internalSetup"[39m)[33m,[39m[36mthis[39m[33m.[39mlibraryInstantiationPromise)[36mreturn[39m [36mthis[39m[33m.[39mlibraryInstantiationPromise[33m;[39m[36mthis[39m[33m.[39mbinaryTarget[33m=[39m[36mawait[39m [36mthis[39m[33m.[39mgetCurrentBinaryTarget()[33m,[39m[36mawait[39m [36mthis[39m[33m.[39mtracingHelper[33m.[39mrunInChildSpan([32m"load_engine"[39m[33m,[39m()[33m=>[39m[36mthis[39m[33m.[39mloadEngine())[33m,[39m[36mthis[39m[33m.[39mversion()}[36masync[39m getCurrentBinaryTarget(){}parseEngineResponse(e){[36mif[39m([33m![39me)[36mthrow[39m [36mnew[39m [33mQ[39m([32m"Response from the Engine was empty"[39m[33m,[39m{clientVersion[33m:[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion})[33m;[39m[36mtry[39m{[36mreturn[39m [33mJSON[39m[33m.[39mparse(e)}[36mcatch[39m{[36mthrow[39m [36mnew[39m [33mQ[39m([32m"Unable to JSON.parse response from engine"[39m[33m,[39m{clientVersion[33m:[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion})}}[36masync[39m loadEngine(){[36mif[39m([33m![39m[36mthis[39m[33m.[39mengine){[36mthis[39m[33m.[39m[33mQueryEngineConstructor[39m[33m||[39m([36mthis[39m[33m.[39mlibrary[33m=[39m[36mawait[39m [36mthis[39m[33m.[39mlibraryLoader[33m.[39mloadLibrary([36mthis[39m[33m.[39mconfig)[33m,[39m[36mthis[39m[33m.[39m[33mQueryEngineConstructor[39m[33m=[39m[36mthis[39m[33m.[39mlibrary[33m.[39m[33mQueryEngine[39m)[33m;[39m[36mtry[39m{[36mlet[39m e[33m=[39m[36mnew[39m w([36mthis[39m)[33m;[39m[36mthis[39m[33m.[39madapterPromise[33m||[39m([36mthis[39m[33m.[39madapterPromise[33m=[39m[36mthis[39m[33m.[39mconfig[33m.[39madapter[33m?[39m[33m.[39mconnect()[33m?[39m[33m.[39mthen(qt))[33m;[39m[36mlet[39m r[33m=[39m[36mawait[39m [36mthis[39m[33m.[39madapterPromise[33m;[39mr[33m&&[39mge([32m"Using driver adapter: %O"[39m[33m,[39mr)[33m,[39m[36mthis[39m[33m.[39mengine[33m=[39m[36mthis[39m[33m.[39mwrapEngine([36mnew[39m [36mthis[39m[33m.[39m[33mQueryEngineConstructor[39m({datamodel[33m:[39m[36mthis[39m[33m.[39mdatamodel[33m,[39menv[33m:[39mg[33m.[39menv[33m,[39mlogQueries[33m:[39m[36mthis[39m[33m.[39mconfig[33m.[39mlogQueries[33m?[39m[33m?[39m[33m![39m[35m1[39m[33m,[39mignoreEnvVarErrors[33m:[39m[33m![39m[35m0[39m[33m,[39mdatasourceOverrides[33m:[39m[36mthis[39m[33m.[39mdatasourceOverrides[33m?[39m[33m?[39m{}[33m,[39mlogLevel[33m:[39m[36mthis[39m[33m.[39mlogLevel[33m,[39mconfigDir[33m:[39m[36mthis[39m[33m.[39mconfig[33m.[39mcwd[33m,[39mengineProtocol[33m:[39m[32m"json"[39m[33m,[39menableTracing[33m:[39m[36mthis[39m[33m.[39mtracingHelper[33m.[39misEnabled()}[33m,[39mn[33m=>[39m{e[33m.[39mderef()[33m?[39m[33m.[39mlogger(n)}[33m,[39mr))}[36mcatch[39m(e){[36mlet[39m r[33m=[39me[33m,[39mn[33m=[39m[36mthis[39m[33m.[39mparseInitError(r[33m.[39mmessage)[33m;[39m[36mthrow[39m [36mtypeof[39m n[33m==[39m[32m"string"[39m[33m?[39mr[33m:[39m[36mnew[39m [33mI[39m(n[33m.[39mmessage[33m,[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion[33m,[39mn[33m.[39merror_code)}}}logger(e){[36mlet[39m r[33m=[39m[36mthis[39m[33m.[39mparseEngineResponse(e)[33m;[39mr[33m&&[39m(r[33m.[39mlevel[33m=[39mr[33m?[39m[33m.[39mlevel[33m.[39mtoLowerCase()[33m?[39m[33m?[39m[32m"unknown"[39m[33m,[39m[33mSl[39m(r)[33m?[39m[36mthis[39m[33m.[39mlogEmitter[33m.[39memit([32m"query"[39m[33m,[39m{timestamp[33m:[39m[36mnew[39m [33mDate[39m[33m,[39mquery[33m:[39mr[33m.[39mquery[33m,[39mparams[33m:[39mr[33m.[39mparams[33m,[39mduration[33m:[39m[33mNumber[39m(r[33m.[39mduration_ms)[33m,[39mtarget[33m:[39mr[33m.[39mmodule_path})[33m:[39m([33mOl[39m(r)[33m,[39m[36mthis[39m[33m.[39mlogEmitter[33m.[39memit(r[33m.[39mlevel[33m,[39m{timestamp[33m:[39m[36mnew[39m [33mDate[39m[33m,[39mmessage[33m:[39mr[33m.[39mmessage[33m,[39mtarget[33m:[39mr[33m.[39mmodule_path})))}parseInitError(e){[36mtry[39m{[36mreturn[39m [33mJSON[39m[33m.[39mparse(e)}[36mcatch[39m{}[36mreturn[39m e}parseRequestError(e){[36mtry[39m{[36mreturn[39m [33mJSON[39m[33m.[39mparse(e)}[36mcatch[39m{}[36mreturn[39m e}onBeforeExit(){[36mthrow[39m [36mnew[39m [33mError[39m([32m'"beforeExit" hook is not applicable to the library engine since Prisma 5.0.0, it is only relevant and implemented for the binary engine. Please add your event listener to the `process` object directly instead.'[39m)}[36masync[39m start(){[36mif[39m([36mthis[39m[33m.[39mlibraryInstantiationPromise[33m||[39m([36mthis[39m[33m.[39mlibraryInstantiationPromise[33m=[39m[36mthis[39m[33m.[39minstantiateLibrary())[33m,[39m[36mawait[39m [36mthis[39m[33m.[39mlibraryInstantiationPromise[33m,[39m[36mawait[39m [36mthis[39m[33m.[39mlibraryStoppingPromise[33m,[39m[36mthis[39m[33m.[39mlibraryStartingPromise)[36mreturn[39m ge([32m`library already starting, this.libraryStarted: ${this.libraryStarted}`[39m)[33m,[39m[36mthis[39m[33m.[39mlibraryStartingPromise[33m;[39m[36mif[39m([36mthis[39m[33m.[39mlibraryStarted)[36mreturn[39m[33m;[39m[36mlet[39m e[33m=[39m[36masync[39m()[33m=>[39m{ge([32m"library starting"[39m)[33m;[39m[36mtry[39m{[36mlet[39m r[33m=[39m{traceparent[33m:[39m[36mthis[39m[33m.[39mtracingHelper[33m.[39mgetTraceParent()}[33m;[39m[36mawait[39m [36mthis[39m[33m.[39mengine[33m?[39m[33m.[39mconnect([33mJSON[39m[33m.[39mstringify(r))[33m,[39m[36mthis[39m[33m.[39mlibraryStarted[33m=[39m[33m![39m[35m0[39m[33m,[39m[36mthis[39m[33m.[39madapterPromise[33m||[39m([36mthis[39m[33m.[39madapterPromise[33m=[39m[36mthis[39m[33m.[39mconfig[33m.[39madapter[33m?[39m[33m.[39mconnect()[33m?[39m[33m.[39mthen(qt))[33m,[39m[36mawait[39m [36mthis[39m[33m.[39madapterPromise[33m,[39mge([32m"library started"[39m)}[36mcatch[39m(r){[36mlet[39m n[33m=[39m[36mthis[39m[33m.[39mparseInitError(r[33m.[39mmessage)[33m;[39m[36mthrow[39m [36mtypeof[39m n[33m==[39m[32m"string"[39m[33m?[39mr[33m:[39m[36mnew[39m [33mI[39m(n[33m.[39mmessage[33m,[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion[33m,[39mn[33m.[39merror_code)}[36mfinally[39m{[36mthis[39m[33m.[39mlibraryStartingPromise[33m=[39m[36mvoid[39m [35m0[39m}}[33m;[39m[36mreturn[39m [36mthis[39m[33m.[39mlibraryStartingPromise[33m=[39m[36mthis[39m[33m.[39mtracingHelper[33m.[39mrunInChildSpan([32m"connect"[39m[33m,[39me)[33m,[39m[36mthis[39m[33m.[39mlibraryStartingPromise}[36masync[39m stop(){[36mif[39m([36mawait[39m [36mthis[39m[33m.[39mlibraryInstantiationPromise[33m,[39m[36mawait[39m [36mthis[39m[33m.[39mlibraryStartingPromise[33m,[39m[36mawait[39m [36mthis[39m[33m.[39mexecutingQueryPromise[33m,[39m[36mthis[39m[33m.[39mlibraryStoppingPromise)[36mreturn[39m ge([32m"library is already stopping"[39m)[33m,[39m[36mthis[39m[33m.[39mlibraryStoppingPromise[33m;[39m[36mif[39m([33m![39m[36mthis[39m[33m.[39mlibraryStarted){[36mawait[39m([36mawait[39m [36mthis[39m[33m.[39madapterPromise)[33m?[39m[33m.[39mdispose()[33m,[39m[36mthis[39m[33m.[39madapterPromise[33m=[39m[36mvoid[39m [35m0[39m[33m;[39m[36mreturn[39m}[36mlet[39m e[33m=[39m[36masync[39m()[33m=>[39m{[36mawait[39m [36mnew[39m [33mPromise[39m(n[33m=>[39msetImmediate(n))[33m,[39mge([32m"library stopping"[39m)[33m;[39m[36mlet[39m r[33m=[39m{traceparent[33m:[39m[36mthis[39m[33m.[39mtracingHelper[33m.[39mgetTraceParent()}[33m;[39m[36mawait[39m [36mthis[39m[33m.[39mengine[33m?[39m[33m.[39mdisconnect([33mJSON[39m[33m.[39mstringify(r))[33m,[39m[36mthis[39m[33m.[39mengine[33m?[39m[33m.[39mfree[33m&&[39m[36mthis[39m[33m.[39mengine[33m.[39mfree()[33m,[39m[36mthis[39m[33m.[39mengine[33m=[39m[36mvoid[39m [35m0[39m[33m,[39m[36mthis[39m[33m.[39mlibraryStarted[33m=[39m[33m![39m[35m1[39m[33m,[39m[36mthis[39m[33m.[39mlibraryStoppingPromise[33m=[39m[36mvoid[39m [35m0[39m[33m,[39m[36mthis[39m[33m.[39mlibraryInstantiationPromise[33m=[39m[36mvoid[39m [35m0[39m[33m,[39m[36mawait[39m([36mawait[39m [36mthis[39m[33m.[39madapterPromise)[33m?[39m[33m.[39mdispose()[33m,[39m[36mthis[39m[33m.[39madapterPromise[33m=[39m[36mvoid[39m [35m0[39m[33m,[39mge([32m"library stopped"[39m)}[33m;[39m[36mreturn[39m [36mthis[39m[33m.[39mlibraryStoppingPromise[33m=[39m[36mthis[39m[33m.[39mtracingHelper[33m.[39mrunInChildSpan([32m"disconnect"[39m[33m,[39me)[33m,[39m[36mthis[39m[33m.[39mlibraryStoppingPromise}version(){[36mreturn[39m [36mthis[39m[33m.[39mversionInfo[33m=[39m[36mthis[39m[33m.[39mlibrary[33m?[39m[33m.[39mversion()[33m,[39m[36mthis[39m[33m.[39mversionInfo[33m?[39m[33m.[39mversion[33m?[39m[33m?[39m[32m"unknown"[39m}debugPanic(e){[36mreturn[39m [36mthis[39m[33m.[39mlibrary[33m?[39m[33m.[39mdebugPanic(e)}[36masync[39m request(e[33m,[39m{traceparent[33m:[39mr[33m,[39minteractiveTransaction[33m:[39mn}){ge([32m`sending request, this.libraryStarted: ${this.libraryStarted}`[39m)[33m;[39m[36mlet[39m i[33m=[39m[33mJSON[39m[33m.[39mstringify({traceparent[33m:[39mr})[33m,[39mo[33m=[39m[33mJSON[39m[33m.[39mstringify(e)[33m;[39m[36mtry[39m{[36mawait[39m [36mthis[39m[33m.[39mstart()[33m;[39m[36mlet[39m s[33m=[39m[36mawait[39m [36mthis[39m[33m.[39madapterPromise[33m;[39m[36mthis[39m[33m.[39mexecutingQueryPromise[33m=[39m[36mthis[39m[33m.[39mengine[33m?[39m[33m.[39mquery(o[33m,[39mi[33m,[39mn[33m?[39m[33m.[39mid)[33m,[39m[36mthis[39m[33m.[39mlastQuery[33m=[39mo[33m;[39m[36mlet[39m a[33m=[39m[36mthis[39m[33m.[39mparseEngineResponse([36mawait[39m [36mthis[39m[33m.[39mexecutingQueryPromise)[33m;[39m[36mif[39m(a[33m.[39merrors)[36mthrow[39m a[33m.[39merrors[33m.[39mlength[33m===[39m[35m1[39m[33m?[39m[36mthis[39m[33m.[39mbuildQueryError(a[33m.[39merrors[[35m0[39m][33m,[39ms[33m?[39m[33m.[39merrorRegistry)[33m:[39m[36mnew[39m [33mQ[39m([33mJSON[39m[33m.[39mstringify(a[33m.[39merrors)[33m,[39m{clientVersion[33m:[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion})[33m;[39m[36mif[39m([36mthis[39m[33m.[39mloggerRustPanic)[36mthrow[39m [36mthis[39m[33m.[39mloggerRustPanic[33m;[39m[36mreturn[39m{data[33m:[39ma}}[36mcatch[39m(s){[36mif[39m(s [36minstanceof[39m [33mI[39m)[36mthrow[39m s[33m;[39ms[33m.[39mcode[33m===[39m[32m"GenericFailure"[39m[33m&&[39ms[33m.[39mmessage[33m?[39m[33m.[39mstartsWith([32m"PANIC:"[39m)[33m;[39m[36mlet[39m a[33m=[39m[36mthis[39m[33m.[39mparseRequestError(s[33m.[39mmessage)[33m;[39m[36mthrow[39m [36mtypeof[39m a[33m==[39m[32m"string"[39m[33m?[39ms[33m:[39m[36mnew[39m [33mQ[39m([32m`${a.message}[39m
 [90m    |[39m                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
 [90m 15 |[39m [32m${a.backtrace}`[39m[33m,[39m{clientVersion[33m:[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion})}}[36masync[39m requestBatch(e[33m,[39m{transaction[33m:[39mr[33m,[39mtraceparent[33m:[39mn}){ge([32m"requestBatch"[39m)[33m;[39m[36mlet[39m i[33m=[39mur(e[33m,[39mr)[33m;[39m[36mawait[39m [36mthis[39m[33m.[39mstart()[33m;[39m[36mlet[39m o[33m=[39m[36mawait[39m [36mthis[39m[33m.[39madapterPromise[33m;[39m[36mthis[39m[33m.[39mlastQuery[33m=[39m[33mJSON[39m[33m.[39mstringify(i)[33m,[39m[36mthis[39m[33m.[39mexecutingQueryPromise[33m=[39m[36mthis[39m[33m.[39mengine[33m?[39m[33m.[39mquery([36mthis[39m[33m.[39mlastQuery[33m,[39m[33mJSON[39m[33m.[39mstringify({traceparent[33m:[39mn})[33m,[39mgo(r))[33m;[39m[36mlet[39m s[33m=[39m[36mawait[39m [36mthis[39m[33m.[39mexecutingQueryPromise[33m,[39ma[33m=[39m[36mthis[39m[33m.[39mparseEngineResponse(s)[33m;[39m[36mif[39m(a[33m.[39merrors)[36mthrow[39m a[33m.[39merrors[33m.[39mlength[33m===[39m[35m1[39m[33m?[39m[36mthis[39m[33m.[39mbuildQueryError(a[33m.[39merrors[[35m0[39m][33m,[39mo[33m?[39m[33m.[39merrorRegistry)[33m:[39m[36mnew[39m [33mQ[39m([33mJSON[39m[33m.[39mstringify(a[33m.[39merrors)[33m,[39m{clientVersion[33m:[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion})[33m;[39m[36mlet[39m{batchResult[33m:[39mf[33m,[39merrors[33m:[39mh}[33m=[39ma[33m;[39m[36mif[39m([33mArray[39m[33m.[39misArray(f))[36mreturn[39m f[33m.[39mmap([33mC[39m[33m=>[39m[33mC[39m[33m.[39merrors[33m&&[39m[33mC[39m[33m.[39merrors[33m.[39mlength[33m>[39m[35m0[39m[33m?[39m[36mthis[39m[33m.[39mloggerRustPanic[33m?[39m[33m?[39m[36mthis[39m[33m.[39mbuildQueryError([33mC[39m[33m.[39merrors[[35m0[39m][33m,[39mo[33m?[39m[33m.[39merrorRegistry)[33m:[39m{data[33m:[39m[33mC[39m})[33m;[39m[36mthrow[39m h[33m&&[39mh[33m.[39mlength[33m===[39m[35m1[39m[33m?[39m[36mnew[39m [33mError[39m(h[[35m0[39m][33m.[39merror)[33m:[39m[36mnew[39m [33mError[39m([33mJSON[39m[33m.[39mstringify(a))}buildQueryError(e[33m,[39mr){e[33m.[39muser_facing_error[33m.[39mis_panic[33m;[39m[36mlet[39m n[33m=[39m[36mthis[39m[33m.[39mgetExternalAdapterError(e[33m.[39muser_facing_error[33m,[39mr)[33m;[39m[36mreturn[39m n[33m?[39mn[33m.[39merror[33m:[39mcr(e[33m,[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion[33m,[39m[36mthis[39m[33m.[39mconfig[33m.[39mactiveProvider)}getExternalAdapterError(e[33m,[39mr){[36mif[39m(e[33m.[39merror_code[33m===[39m[33mRl[39m[33m&&[39mr){[36mlet[39m n[33m=[39me[33m.[39mmeta[33m?[39m[33m.[39mid[33m;[39m[33mBt[39m([36mtypeof[39m n[33m==[39m[32m"number"[39m[33m,[39m[32m"Malformed external JS error received from the engine"[39m)[33m;[39m[36mlet[39m i[33m=[39mr[33m.[39mconsumeError(n)[33m;[39m[36mreturn[39m [33mBt[39m(i[33m,[39m[32m"External error with reported id was not registered"[39m)[33m,[39mi}}[36masync[39m metrics(e){[36mawait[39m [36mthis[39m[33m.[39mstart()[33m;[39m[36mlet[39m r[33m=[39m[36mawait[39m [36mthis[39m[33m.[39mengine[33m.[39mmetrics([33mJSON[39m[33m.[39mstringify(e))[33m;[39m[36mreturn[39m e[33m.[39mformat[33m===[39m[32m"prometheus"[39m[33m?[39mr[33m:[39m[36mthis[39m[33m.[39mparseEngineResponse(r)}}[33m;[39m[36mfunction[39m [33mIl[39m(t){[36mreturn[39m [36mtypeof[39m t[33m==[39m[32m"object"[39m[33m&&[39mt[33m!==[39m[36mnull[39m[33m&&[39mt[33m.[39merror_code[33m!==[39m[36mvoid[39m [35m0[39m}u()[33m;[39mc()[33m;[39mm()[33m;[39mp()[33m;[39md()[33m;[39ml()[33m;[39m[36mvar[39m [33mCt[39m[33m=[39m[32m"Accelerate has not been setup correctly. Make sure your client is using `.$extends(withAccelerate())`. See https://pris.ly/d/accelerate-getting-started"[39m[33m,[39mfr[33m=[39m[36mclass[39m{constructor(e){[36mthis[39m[33m.[39mconfig[33m=[39me[33m;[39m[36mthis[39m[33m.[39mresolveDatasourceUrl[33m=[39m[36mthis[39m[33m.[39mconfig[33m.[39maccelerateUtils[33m?[39m[33m.[39mresolveDatasourceUrl[33m,[39m[36mthis[39m[33m.[39mgetBatchRequestPayload[33m=[39m[36mthis[39m[33m.[39mconfig[33m.[39maccelerateUtils[33m?[39m[33m.[39mgetBatchRequestPayload[33m,[39m[36mthis[39m[33m.[39mprismaGraphQLToJSError[33m=[39m[36mthis[39m[33m.[39mconfig[33m.[39maccelerateUtils[33m?[39m[33m.[39mprismaGraphQLToJSError[33m,[39m[36mthis[39m[33m.[39m[33mPrismaClientUnknownRequestError[39m[33m=[39m[36mthis[39m[33m.[39mconfig[33m.[39maccelerateUtils[33m?[39m[33m.[39m[33mPrismaClientUnknownRequestError[39m[33m,[39m[36mthis[39m[33m.[39m[33mPrismaClientInitializationError[39m[33m=[39m[36mthis[39m[33m.[39mconfig[33m.[39maccelerateUtils[33m?[39m[33m.[39m[33mPrismaClientInitializationError[39m[33m,[39m[36mthis[39m[33m.[39m[33mPrismaClientKnownRequestError[39m[33m=[39m[36mthis[39m[33m.[39mconfig[33m.[39maccelerateUtils[33m?[39m[33m.[39m[33mPrismaClientKnownRequestError[39m[33m,[39m[36mthis[39m[33m.[39mdebug[33m=[39m[36mthis[39m[33m.[39mconfig[33m.[39maccelerateUtils[33m?[39m[33m.[39mdebug[33m,[39m[36mthis[39m[33m.[39mengineVersion[33m=[39m[36mthis[39m[33m.[39mconfig[33m.[39maccelerateUtils[33m?[39m[33m.[39mengineVersion[33m,[39m[36mthis[39m[33m.[39mclientVersion[33m=[39m[36mthis[39m[33m.[39mconfig[33m.[39maccelerateUtils[33m?[39m[33m.[39mclientVersion}name[33m=[39m[32m"AccelerateEngine"[39m[33m;[39mresolveDatasourceUrl[33m;[39mgetBatchRequestPayload[33m;[39mprismaGraphQLToJSError[33m;[39m[33mPrismaClientUnknownRequestError[39m[33m;[39m[33mPrismaClientInitializationError[39m[33m;[39m[33mPrismaClientKnownRequestError[39m[33m;[39mdebug[33m;[39mengineVersion[33m;[39mclientVersion[33m;[39monBeforeExit(e){}[36masync[39m start(){}[36masync[39m stop(){}version(e){[36mreturn[39m[32m"unknown"[39m}transaction(e[33m,[39mr[33m,[39mn){[36mthrow[39m [36mnew[39m [33mI[39m([33mCt[39m[33m,[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion)}metrics(e){[36mthrow[39m [36mnew[39m [33mI[39m([33mCt[39m[33m,[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion)}request(e[33m,[39mr){[36mthrow[39m [36mnew[39m [33mI[39m([33mCt[39m[33m,[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion)}requestBatch(e[33m,[39mr){[36mthrow[39m [36mnew[39m [33mI[39m([33mCt[39m[33m,[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion)}applyPendingMigrations(){[36mthrow[39m [36mnew[39m [33mI[39m([33mCt[39m[33m,[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion)}}[33m;[39mu()[33m;[39mc()[33m;[39mm()[33m;[39mp()[33m;[39md()[33m;[39ml()[33m;[39m[36mfunction[39m ho({url[33m:[39mt[33m,[39madapter[33m:[39me[33m,[39mcopyEngine[33m:[39mr[33m,[39mtargetBuildType[33m:[39mn}){[36mlet[39m i[33m=[39m[][33m,[39mo[33m=[39m[][33m,[39ms[33m=[39m[33mO[39m[33m=>[39m{i[33m.[39mpush({_tag[33m:[39m[32m"warning"[39m[33m,[39mvalue[33m:[39m[33mO[39m})}[33m,[39ma[33m=[39m[33mO[39m[33m=>[39m{[36mlet[39m [33mD[39m[33m=[39m[33mO[39m[33m.[39mjoin([32m`[39m
 [90m 16 |[39m [32m`[39m)[33m;[39mo[33m.[39mpush({_tag[33m:[39m[32m"error"[39m[33m,[39mvalue[33m:[39m[33mD[39m})}[33m,[39mf[33m=[39m[33m![39m[33m![39mt[33m?[39m[33m.[39mstartsWith([32m"prisma://"[39m)[33m,[39mh[33m=[39m_r(t)[33m,[39m[33mC[39m[33m=[39m[33m![39m[33m![39me[33m,[39m[33mA[39m[33m=[39mf[33m||[39mh[33m;[39m[33m![39m[33mC[39m[33m&&[39mr[33m&&[39m[33mA[39m[33m&&[39mn[33m!==[39m[32m"client"[39m[33m&&[39mn[33m!==[39m[32m"wasm-compiler-edge"[39m[33m&&[39ms([[32m"recommend--no-engine"[39m[33m,[39m[32m"In production, we recommend using `prisma generate --no-engine` (See: `prisma generate --help`)"[39m])[33m;[39m[36mlet[39m k[33m=[39m[33mA[39m[33m||[39m[33m![39mr[33m;[39m[33mC[39m[33m&&[39m(k[33m||[39mn[33m===[39m[32m"edge"[39m)[33m&&[39m(n[33m===[39m[32m"edge"[39m[33m?[39ma([[32m"Prisma Client was configured to use the `adapter` option but it was imported via its `/edge` endpoint."[39m[33m,[39m[32m"Please either remove the `/edge` endpoint or remove the `adapter` from the Prisma Client constructor."[39m])[33m:[39m[33mA[39m[33m?[39ma([[32m"You've provided both a driver adapter and an Accelerate database URL. Driver adapters currently cannot connect to Accelerate."[39m[33m,[39m[32m"Please provide either a driver adapter with a direct database URL or an Accelerate URL and no driver adapter."[39m])[33m:[39mr[33m||[39ma([[32m"Prisma Client was configured to use the `adapter` option but `prisma generate` was run with `--no-engine`."[39m[33m,[39m[32m"Please run `prisma generate` without `--no-engine` to be able to use Prisma Client with the adapter."[39m]))[33m;[39m[36mlet[39m [33mR[39m[33m=[39m{accelerate[33m:[39mk[33m,[39mppg[33m:[39mh[33m,[39mdriverAdapters[33m:[39m[33mC[39m}[33m;[39m[36mfunction[39m _([33mO[39m){[36mreturn[39m [33mO[39m[33m.[39mlength[33m>[39m[35m0[39m}[36mreturn[39m _(o)[33m?[39m{ok[33m:[39m[33m![39m[35m1[39m[33m,[39mdiagnostics[33m:[39m{warnings[33m:[39mi[33m,[39merrors[33m:[39mo}[33m,[39misUsing[33m:[39m[33mR[39m}[33m:[39m{ok[33m:[39m[33m![39m[35m0[39m[33m,[39mdiagnostics[33m:[39m{warnings[33m:[39mi}[33m,[39misUsing[33m:[39m[33mR[39m}}[36mfunction[39m bo({copyEngine[33m:[39mt[33m=[39m[33m![39m[35m0[39m}[33m,[39me){[36mlet[39m r[33m;[39m[36mtry[39m{r[33m=[39mdr({inlineDatasources[33m:[39me[33m.[39minlineDatasources[33m,[39moverrideDatasources[33m:[39me[33m.[39moverrideDatasources[33m,[39menv[33m:[39m{[33m...[39me[33m.[39menv[33m,[39m[33m...[39mg[33m.[39menv}[33m,[39mclientVersion[33m:[39me[33m.[39mclientVersion})}[36mcatch[39m{}[36mlet[39m{ok[33m:[39mn[33m,[39misUsing[33m:[39mi[33m,[39mdiagnostics[33m:[39mo}[33m=[39mho({url[33m:[39mr[33m,[39madapter[33m:[39me[33m.[39madapter[33m,[39mcopyEngine[33m:[39mt[33m,[39mtargetBuildType[33m:[39m[32m"wasm-engine-edge"[39m})[33m;[39m[36mfor[39m([36mlet[39m [33mA[39m [36mof[39m o[33m.[39mwarnings)at([33m...[39m[33mA[39m[33m.[39mvalue)[33m;[39m[36mif[39m([33m![39mn){[36mlet[39m [33mA[39m[33m=[39mo[33m.[39merrors[[35m0[39m][33m;[39m[36mthrow[39m [36mnew[39m [33mK[39m([33mA[39m[33m.[39mvalue[33m,[39m{clientVersion[33m:[39me[33m.[39mclientVersion})}[36mlet[39m s[33m=[39m[33mNe[39m(e[33m.[39mgenerator)[33m,[39ma[33m=[39ms[33m===[39m[32m"library"[39m[33m,[39mf[33m=[39ms[33m===[39m[32m"binary"[39m[33m,[39mh[33m=[39ms[33m===[39m[32m"client"[39m[33m,[39m[33mC[39m[33m=[39m(i[33m.[39maccelerate[33m||[39mi[33m.[39mppg)[33m&&[39m[33m![39mi[33m.[39mdriverAdapters[33m;[39m[36mreturn[39m i[33m.[39maccelerate[33m,[39mi[33m.[39mdriverAdapters[33m?[39m[36mnew[39m [33mTt[39m(e)[33m:[39mi[33m.[39maccelerate[33m?[39m[36mnew[39m fr(e)[33m:[39m[36mnew[39m sn({clientVersion[33m:[39me[33m.[39mclientVersion})}[36mvar[39m sn[33m=[39m[36mclass[39m{constructor(e){[36mreturn[39m [36mnew[39m [33mProxy[39m([36mthis[39m[33m,[39m{[36mget[39m(r[33m,[39mn){[36mlet[39m i[33m=[39m[32m`In order to run Prisma Client on edge runtime, either:[39m
 [90m 17 |[39m [32m- Use Prisma Accelerate: https://pris.ly/d/accelerate[39m[0m

A Node.js API is used (setImmediate at line: 14) which is not supported in the Edge Runtime.
Learn more: https://nextjs.org/docs/api-reference/edge-runtime

Import trace:
  Edge Middleware:
    ./src/lib/prisma/generated/runtime/wasm-engine-edge.js
    ./src/lib/prisma/generated/wasm.js
    ./src/lib/prisma/generated/default.js
    ./src/lib/prisma/connection.ts
    ./src/lib/prisma/permission-queries.ts
    ./src/middleware.ts


 âš  ./src/lib/utils/session-utils.ts:6:1
Ecmascript file had an error
[0m [90m 4 |[39m [90m */[39m
 [90m 5 |[39m
[31m[1m>[22m[39m[90m 6 |[39m [36mimport[39m { randomUUID } [36mfrom[39m [32m"crypto"[39m
 [90m   |[39m [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
 [90m 7 |[39m
 [90m 8 |[39m [90m/**[39m
 [90m 9 |[39m [90m * Genera un ID Ãºnico para una sesiÃ³n[39m[0m

A Node.js module is loaded ('crypto' at line 6) which is not supported in the Edge Runtime.
Learn More: https://nextjs.org/docs/messages/node-module-in-edge-runtime

Import trace:
  Edge Middleware:
    ./src/lib/utils/session-utils.ts
    ./src/lib/auth.ts
    ./src/middleware.ts


 HEAD / 404 in 1942ms
 âš  ./src/lib/prisma/generated/runtime/wasm-engine-edge.js:14:7269
Ecmascript file had an error
[0m [90m 12 |[39m [32m[39m
 [90m 13 |[39m [32mIn Cloudflare module Workers, environment variables are available only in the Worker's \`env\` parameter of \`fetch\`.[39m
[31m[1m>[22m[39m[90m 14 |[39m [32mTo solve this, provide the connection string directly: https://pris.ly/d/cloudflare-datasource-url`[39m[33m,[39mn)[33m:[39m[36mnew[39m [33mI[39m([32m`error: Environment variable not found: ${s.fromEnvVar}.`[39m[33m,[39mn)[33m;[39m[36mif[39m(i[33m===[39m[36mvoid[39m [35m0[39m)[36mthrow[39m [36mnew[39m [33mI[39m([32m"error: Missing URL environment variable, value, or override."[39m[33m,[39mn)[33m;[39m[36mreturn[39m i}u()[33m;[39mc()[33m;[39mm()[33m;[39mp()[33m;[39md()[33m;[39ml()[33m;[39mu()[33m;[39mc()[33m;[39mm()[33m;[39mp()[33m;[39md()[33m;[39ml()[33m;[39m[36mfunction[39m go(t){[36mif[39m(t[33m?[39m[33m.[39mkind[33m===[39m[32m"itx"[39m)[36mreturn[39m t[33m.[39moptions[33m.[39mid}u()[33m;[39mc()[33m;[39mm()[33m;[39mp()[33m;[39md()[33m;[39ml()[33m;[39m[36mvar[39m nn[33m,[39myo[33m=[39m{[36masync[39m loadLibrary(t){[36mlet[39m{clientVersion[33m:[39me[33m,[39madapter[33m:[39mr[33m,[39mengineWasm[33m:[39mn}[33m=[39mt[33m;[39m[36mif[39m(r[33m===[39m[36mvoid[39m [35m0[39m)[36mthrow[39m [36mnew[39m [33mI[39m([32m`The \`adapter\` option for \`PrismaClient\` is required in this context (${Ze().prettyName})`[39m[33m,[39me)[33m;[39m[36mif[39m(n[33m===[39m[36mvoid[39m [35m0[39m)[36mthrow[39m [36mnew[39m [33mI[39m([32m"WASM engine was unexpectedly `undefined`"[39m[33m,[39me)[33m;[39mnn[33m===[39m[36mvoid[39m [35m0[39m[33m&&[39m(nn[33m=[39m([36masync[39m()[33m=>[39m{[36mlet[39m o[33m=[39m[36mawait[39m n[33m.[39mgetRuntime()[33m,[39ms[33m=[39m[36mawait[39m n[33m.[39mgetQueryEngineWasmModule()[33m;[39m[36mif[39m(s[33m==[39m[36mnull[39m)[36mthrow[39m [36mnew[39m [33mI[39m([32m"The loaded wasm module was unexpectedly `undefined` or `null` once loaded"[39m[33m,[39me)[33m;[39m[36mlet[39m a[33m=[39m{[32m"./query_engine_bg.js"[39m[33m:[39mo}[33m,[39mf[33m=[39m[36mnew[39m [33mWebAssembly[39m[33m.[39m[33mInstance[39m(s[33m,[39ma)[33m,[39mh[33m=[39mf[33m.[39mexports[33m.[39m__wbindgen_start[33m;[39m[36mreturn[39m o[33m.[39m__wbg_set_wasm(f[33m.[39mexports)[33m,[39mh()[33m,[39mo[33m.[39m[33mQueryEngine[39m})())[33m;[39m[36mlet[39m i[33m=[39m[36mawait[39m nn[33m;[39m[36mreturn[39m{debugPanic(){[36mreturn[39m [33mPromise[39m[33m.[39mreject([32m"{}"[39m)}[33m,[39mdmmf(){[36mreturn[39m [33mPromise[39m[33m.[39mresolve([32m"{}"[39m)}[33m,[39mversion(){[36mreturn[39m{commit[33m:[39m[32m"unknown"[39m[33m,[39mversion[33m:[39m[32m"unknown"[39m}}[33m,[39m[33mQueryEngine[39m[33m:[39mi}}}[33m;[39m[36mvar[39m [33mRl[39m[33m=[39m[32m"P2036"[39m[33m,[39mge[33m=[39m[33mG[39m([32m"prisma:client:libraryEngine"[39m)[33m;[39m[36mfunction[39m [33mSl[39m(t){[36mreturn[39m t[33m.[39mitem_type[33m===[39m[32m"query"[39m[33m&&[39m[32m"query"[39m[36min[39m t}[36mfunction[39m [33mOl[39m(t){[36mreturn[39m[32m"level"[39m[36min[39m t[33m?[39mt[33m.[39mlevel[33m===[39m[32m"error"[39m[33m&&[39mt[33m.[39mmessage[33m===[39m[32m"PANIC"[39m[33m:[39m[33m![39m[35m1[39m}[36mvar[39m oO[33m=[39m[[33m...[39mkr[33m,[39m[32m"native"[39m][33m,[39mkl[33m=[39m[35m0xffffffffffffffff[39mn[33m,[39mon[33m=[39m[35m1[39mn[33m;[39m[36mfunction[39m [33mDl[39m(){[36mlet[39m t[33m=[39mon[33m++[39m[33m;[39m[36mreturn[39m on[33m>[39mkl[33m&&[39m(on[33m=[39m[35m1[39mn)[33m,[39mt}[36mvar[39m [33mTt[39m[33m=[39m[36mclass[39m{name[33m=[39m[32m"LibraryEngine"[39m[33m;[39mengine[33m;[39mlibraryInstantiationPromise[33m;[39mlibraryStartingPromise[33m;[39mlibraryStoppingPromise[33m;[39mlibraryStarted[33m;[39mexecutingQueryPromise[33m;[39mconfig[33m;[39m[33mQueryEngineConstructor[39m[33m;[39mlibraryLoader[33m;[39mlibrary[33m;[39mlogEmitter[33m;[39mlibQueryEnginePath[33m;[39mbinaryTarget[33m;[39mdatasourceOverrides[33m;[39mdatamodel[33m;[39mlogQueries[33m;[39mlogLevel[33m;[39mlastQuery[33m;[39mloggerRustPanic[33m;[39mtracingHelper[33m;[39madapterPromise[33m;[39mversionInfo[33m;[39mconstructor(e[33m,[39mr){[36mthis[39m[33m.[39mlibraryLoader[33m=[39mr[33m?[39m[33m?[39myo[33m,[39m[36mthis[39m[33m.[39mconfig[33m=[39me[33m,[39m[36mthis[39m[33m.[39mlibraryStarted[33m=[39m[33m![39m[35m1[39m[33m,[39m[36mthis[39m[33m.[39mlogQueries[33m=[39me[33m.[39mlogQueries[33m?[39m[33m?[39m[33m![39m[35m1[39m[33m,[39m[36mthis[39m[33m.[39mlogLevel[33m=[39me[33m.[39mlogLevel[33m?[39m[33m?[39m[32m"error"[39m[33m,[39m[36mthis[39m[33m.[39mlogEmitter[33m=[39me[33m.[39mlogEmitter[33m,[39m[36mthis[39m[33m.[39mdatamodel[33m=[39me[33m.[39minlineSchema[33m,[39m[36mthis[39m[33m.[39mtracingHelper[33m=[39me[33m.[39mtracingHelper[33m,[39me[33m.[39menableDebugLogs[33m&&[39m([36mthis[39m[33m.[39mlogLevel[33m=[39m[32m"debug"[39m)[33m;[39m[36mlet[39m n[33m=[39m[33mObject[39m[33m.[39mkeys(e[33m.[39moverrideDatasources)[[35m0[39m][33m,[39mi[33m=[39me[33m.[39moverrideDatasources[n][33m?[39m[33m.[39murl[33m;[39mn[33m!==[39m[36mvoid[39m [35m0[39m[33m&&[39mi[33m!==[39m[36mvoid[39m [35m0[39m[33m&&[39m([36mthis[39m[33m.[39mdatasourceOverrides[33m=[39m{[n][33m:[39mi})[33m,[39m[36mthis[39m[33m.[39mlibraryInstantiationPromise[33m=[39m[36mthis[39m[33m.[39minstantiateLibrary()}wrapEngine(e){[36mreturn[39m{applyPendingMigrations[33m:[39me[33m.[39mapplyPendingMigrations[33m?[39m[33m.[39mbind(e)[33m,[39mcommitTransaction[33m:[39m[36mthis[39m[33m.[39mwithRequestId(e[33m.[39mcommitTransaction[33m.[39mbind(e))[33m,[39mconnect[33m:[39m[36mthis[39m[33m.[39mwithRequestId(e[33m.[39mconnect[33m.[39mbind(e))[33m,[39mdisconnect[33m:[39m[36mthis[39m[33m.[39mwithRequestId(e[33m.[39mdisconnect[33m.[39mbind(e))[33m,[39mmetrics[33m:[39me[33m.[39mmetrics[33m?[39m[33m.[39mbind(e)[33m,[39mquery[33m:[39m[36mthis[39m[33m.[39mwithRequestId(e[33m.[39mquery[33m.[39mbind(e))[33m,[39mrollbackTransaction[33m:[39m[36mthis[39m[33m.[39mwithRequestId(e[33m.[39mrollbackTransaction[33m.[39mbind(e))[33m,[39msdlSchema[33m:[39me[33m.[39msdlSchema[33m?[39m[33m.[39mbind(e)[33m,[39mstartTransaction[33m:[39m[36mthis[39m[33m.[39mwithRequestId(e[33m.[39mstartTransaction[33m.[39mbind(e))[33m,[39mtrace[33m:[39me[33m.[39mtrace[33m.[39mbind(e)[33m,[39mfree[33m:[39me[33m.[39mfree[33m?[39m[33m.[39mbind(e)}}withRequestId(e){[36mreturn[39m [36masync[39m([33m...[39mr)[33m=>[39m{[36mlet[39m n[33m=[39m[33mDl[39m()[33m.[39mtoString()[33m;[39m[36mtry[39m{[36mreturn[39m [36mawait[39m e([33m...[39mr[33m,[39mn)}[36mfinally[39m{[36mif[39m([36mthis[39m[33m.[39mtracingHelper[33m.[39misEnabled()){[36mlet[39m i[33m=[39m[36mawait[39m [36mthis[39m[33m.[39mengine[33m?[39m[33m.[39mtrace(n)[33m;[39m[36mif[39m(i){[36mlet[39m o[33m=[39m[33mJSON[39m[33m.[39mparse(i)[33m;[39m[36mthis[39m[33m.[39mtracingHelper[33m.[39mdispatchEngineSpans(o[33m.[39mspans)}}}}}[36masync[39m applyPendingMigrations(){[36mthrow[39m [36mnew[39m [33mError[39m([32m"Cannot call this method from this type of engine instance"[39m)}[36masync[39m transaction(e[33m,[39mr[33m,[39mn){[36mawait[39m [36mthis[39m[33m.[39mstart()[33m;[39m[36mlet[39m i[33m=[39m[36mawait[39m [36mthis[39m[33m.[39madapterPromise[33m,[39mo[33m=[39m[33mJSON[39m[33m.[39mstringify(r)[33m,[39ms[33m;[39m[36mif[39m(e[33m===[39m[32m"start"[39m){[36mlet[39m f[33m=[39m[33mJSON[39m[33m.[39mstringify({max_wait[33m:[39mn[33m.[39mmaxWait[33m,[39mtimeout[33m:[39mn[33m.[39mtimeout[33m,[39misolation_level[33m:[39mn[33m.[39misolationLevel})[33m;[39ms[33m=[39m[36mawait[39m [36mthis[39m[33m.[39mengine[33m?[39m[33m.[39mstartTransaction(f[33m,[39mo)}[36melse[39m e[33m===[39m[32m"commit"[39m[33m?[39ms[33m=[39m[36mawait[39m [36mthis[39m[33m.[39mengine[33m?[39m[33m.[39mcommitTransaction(n[33m.[39mid[33m,[39mo)[33m:[39me[33m===[39m[32m"rollback"[39m[33m&&[39m(s[33m=[39m[36mawait[39m [36mthis[39m[33m.[39mengine[33m?[39m[33m.[39mrollbackTransaction(n[33m.[39mid[33m,[39mo))[33m;[39m[36mlet[39m a[33m=[39m[36mthis[39m[33m.[39mparseEngineResponse(s)[33m;[39m[36mif[39m([33mIl[39m(a)){[36mlet[39m f[33m=[39m[36mthis[39m[33m.[39mgetExternalAdapterError(a[33m,[39mi[33m?[39m[33m.[39merrorRegistry)[33m;[39m[36mthrow[39m f[33m?[39mf[33m.[39merror[33m:[39m[36mnew[39m [33mZ[39m(a[33m.[39mmessage[33m,[39m{code[33m:[39ma[33m.[39merror_code[33m,[39mclientVersion[33m:[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion[33m,[39mmeta[33m:[39ma[33m.[39mmeta})}[36melse[39m [36mif[39m([36mtypeof[39m a[33m.[39mmessage[33m==[39m[32m"string"[39m)[36mthrow[39m [36mnew[39m [33mQ[39m(a[33m.[39mmessage[33m,[39m{clientVersion[33m:[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion})[33m;[39m[36mreturn[39m a}[36masync[39m instantiateLibrary(){[36mif[39m(ge([32m"internalSetup"[39m)[33m,[39m[36mthis[39m[33m.[39mlibraryInstantiationPromise)[36mreturn[39m [36mthis[39m[33m.[39mlibraryInstantiationPromise[33m;[39m[36mthis[39m[33m.[39mbinaryTarget[33m=[39m[36mawait[39m [36mthis[39m[33m.[39mgetCurrentBinaryTarget()[33m,[39m[36mawait[39m [36mthis[39m[33m.[39mtracingHelper[33m.[39mrunInChildSpan([32m"load_engine"[39m[33m,[39m()[33m=>[39m[36mthis[39m[33m.[39mloadEngine())[33m,[39m[36mthis[39m[33m.[39mversion()}[36masync[39m getCurrentBinaryTarget(){}parseEngineResponse(e){[36mif[39m([33m![39me)[36mthrow[39m [36mnew[39m [33mQ[39m([32m"Response from the Engine was empty"[39m[33m,[39m{clientVersion[33m:[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion})[33m;[39m[36mtry[39m{[36mreturn[39m [33mJSON[39m[33m.[39mparse(e)}[36mcatch[39m{[36mthrow[39m [36mnew[39m [33mQ[39m([32m"Unable to JSON.parse response from engine"[39m[33m,[39m{clientVersion[33m:[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion})}}[36masync[39m loadEngine(){[36mif[39m([33m![39m[36mthis[39m[33m.[39mengine){[36mthis[39m[33m.[39m[33mQueryEngineConstructor[39m[33m||[39m([36mthis[39m[33m.[39mlibrary[33m=[39m[36mawait[39m [36mthis[39m[33m.[39mlibraryLoader[33m.[39mloadLibrary([36mthis[39m[33m.[39mconfig)[33m,[39m[36mthis[39m[33m.[39m[33mQueryEngineConstructor[39m[33m=[39m[36mthis[39m[33m.[39mlibrary[33m.[39m[33mQueryEngine[39m)[33m;[39m[36mtry[39m{[36mlet[39m e[33m=[39m[36mnew[39m w([36mthis[39m)[33m;[39m[36mthis[39m[33m.[39madapterPromise[33m||[39m([36mthis[39m[33m.[39madapterPromise[33m=[39m[36mthis[39m[33m.[39mconfig[33m.[39madapter[33m?[39m[33m.[39mconnect()[33m?[39m[33m.[39mthen(qt))[33m;[39m[36mlet[39m r[33m=[39m[36mawait[39m [36mthis[39m[33m.[39madapterPromise[33m;[39mr[33m&&[39mge([32m"Using driver adapter: %O"[39m[33m,[39mr)[33m,[39m[36mthis[39m[33m.[39mengine[33m=[39m[36mthis[39m[33m.[39mwrapEngine([36mnew[39m [36mthis[39m[33m.[39m[33mQueryEngineConstructor[39m({datamodel[33m:[39m[36mthis[39m[33m.[39mdatamodel[33m,[39menv[33m:[39mg[33m.[39menv[33m,[39mlogQueries[33m:[39m[36mthis[39m[33m.[39mconfig[33m.[39mlogQueries[33m?[39m[33m?[39m[33m![39m[35m1[39m[33m,[39mignoreEnvVarErrors[33m:[39m[33m![39m[35m0[39m[33m,[39mdatasourceOverrides[33m:[39m[36mthis[39m[33m.[39mdatasourceOverrides[33m?[39m[33m?[39m{}[33m,[39mlogLevel[33m:[39m[36mthis[39m[33m.[39mlogLevel[33m,[39mconfigDir[33m:[39m[36mthis[39m[33m.[39mconfig[33m.[39mcwd[33m,[39mengineProtocol[33m:[39m[32m"json"[39m[33m,[39menableTracing[33m:[39m[36mthis[39m[33m.[39mtracingHelper[33m.[39misEnabled()}[33m,[39mn[33m=>[39m{e[33m.[39mderef()[33m?[39m[33m.[39mlogger(n)}[33m,[39mr))}[36mcatch[39m(e){[36mlet[39m r[33m=[39me[33m,[39mn[33m=[39m[36mthis[39m[33m.[39mparseInitError(r[33m.[39mmessage)[33m;[39m[36mthrow[39m [36mtypeof[39m n[33m==[39m[32m"string"[39m[33m?[39mr[33m:[39m[36mnew[39m [33mI[39m(n[33m.[39mmessage[33m,[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion[33m,[39mn[33m.[39merror_code)}}}logger(e){[36mlet[39m r[33m=[39m[36mthis[39m[33m.[39mparseEngineResponse(e)[33m;[39mr[33m&&[39m(r[33m.[39mlevel[33m=[39mr[33m?[39m[33m.[39mlevel[33m.[39mtoLowerCase()[33m?[39m[33m?[39m[32m"unknown"[39m[33m,[39m[33mSl[39m(r)[33m?[39m[36mthis[39m[33m.[39mlogEmitter[33m.[39memit([32m"query"[39m[33m,[39m{timestamp[33m:[39m[36mnew[39m [33mDate[39m[33m,[39mquery[33m:[39mr[33m.[39mquery[33m,[39mparams[33m:[39mr[33m.[39mparams[33m,[39mduration[33m:[39m[33mNumber[39m(r[33m.[39mduration_ms)[33m,[39mtarget[33m:[39mr[33m.[39mmodule_path})[33m:[39m([33mOl[39m(r)[33m,[39m[36mthis[39m[33m.[39mlogEmitter[33m.[39memit(r[33m.[39mlevel[33m,[39m{timestamp[33m:[39m[36mnew[39m [33mDate[39m[33m,[39mmessage[33m:[39mr[33m.[39mmessage[33m,[39mtarget[33m:[39mr[33m.[39mmodule_path})))}parseInitError(e){[36mtry[39m{[36mreturn[39m [33mJSON[39m[33m.[39mparse(e)}[36mcatch[39m{}[36mreturn[39m e}parseRequestError(e){[36mtry[39m{[36mreturn[39m [33mJSON[39m[33m.[39mparse(e)}[36mcatch[39m{}[36mreturn[39m e}onBeforeExit(){[36mthrow[39m [36mnew[39m [33mError[39m([32m'"beforeExit" hook is not applicable to the library engine since Prisma 5.0.0, it is only relevant and implemented for the binary engine. Please add your event listener to the `process` object directly instead.'[39m)}[36masync[39m start(){[36mif[39m([36mthis[39m[33m.[39mlibraryInstantiationPromise[33m||[39m([36mthis[39m[33m.[39mlibraryInstantiationPromise[33m=[39m[36mthis[39m[33m.[39minstantiateLibrary())[33m,[39m[36mawait[39m [36mthis[39m[33m.[39mlibraryInstantiationPromise[33m,[39m[36mawait[39m [36mthis[39m[33m.[39mlibraryStoppingPromise[33m,[39m[36mthis[39m[33m.[39mlibraryStartingPromise)[36mreturn[39m ge([32m`library already starting, this.libraryStarted: ${this.libraryStarted}`[39m)[33m,[39m[36mthis[39m[33m.[39mlibraryStartingPromise[33m;[39m[36mif[39m([36mthis[39m[33m.[39mlibraryStarted)[36mreturn[39m[33m;[39m[36mlet[39m e[33m=[39m[36masync[39m()[33m=>[39m{ge([32m"library starting"[39m)[33m;[39m[36mtry[39m{[36mlet[39m r[33m=[39m{traceparent[33m:[39m[36mthis[39m[33m.[39mtracingHelper[33m.[39mgetTraceParent()}[33m;[39m[36mawait[39m [36mthis[39m[33m.[39mengine[33m?[39m[33m.[39mconnect([33mJSON[39m[33m.[39mstringify(r))[33m,[39m[36mthis[39m[33m.[39mlibraryStarted[33m=[39m[33m![39m[35m0[39m[33m,[39m[36mthis[39m[33m.[39madapterPromise[33m||[39m([36mthis[39m[33m.[39madapterPromise[33m=[39m[36mthis[39m[33m.[39mconfig[33m.[39madapter[33m?[39m[33m.[39mconnect()[33m?[39m[33m.[39mthen(qt))[33m,[39m[36mawait[39m [36mthis[39m[33m.[39madapterPromise[33m,[39mge([32m"library started"[39m)}[36mcatch[39m(r){[36mlet[39m n[33m=[39m[36mthis[39m[33m.[39mparseInitError(r[33m.[39mmessage)[33m;[39m[36mthrow[39m [36mtypeof[39m n[33m==[39m[32m"string"[39m[33m?[39mr[33m:[39m[36mnew[39m [33mI[39m(n[33m.[39mmessage[33m,[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion[33m,[39mn[33m.[39merror_code)}[36mfinally[39m{[36mthis[39m[33m.[39mlibraryStartingPromise[33m=[39m[36mvoid[39m [35m0[39m}}[33m;[39m[36mreturn[39m [36mthis[39m[33m.[39mlibraryStartingPromise[33m=[39m[36mthis[39m[33m.[39mtracingHelper[33m.[39mrunInChildSpan([32m"connect"[39m[33m,[39me)[33m,[39m[36mthis[39m[33m.[39mlibraryStartingPromise}[36masync[39m stop(){[36mif[39m([36mawait[39m [36mthis[39m[33m.[39mlibraryInstantiationPromise[33m,[39m[36mawait[39m [36mthis[39m[33m.[39mlibraryStartingPromise[33m,[39m[36mawait[39m [36mthis[39m[33m.[39mexecutingQueryPromise[33m,[39m[36mthis[39m[33m.[39mlibraryStoppingPromise)[36mreturn[39m ge([32m"library is already stopping"[39m)[33m,[39m[36mthis[39m[33m.[39mlibraryStoppingPromise[33m;[39m[36mif[39m([33m![39m[36mthis[39m[33m.[39mlibraryStarted){[36mawait[39m([36mawait[39m [36mthis[39m[33m.[39madapterPromise)[33m?[39m[33m.[39mdispose()[33m,[39m[36mthis[39m[33m.[39madapterPromise[33m=[39m[36mvoid[39m [35m0[39m[33m;[39m[36mreturn[39m}[36mlet[39m e[33m=[39m[36masync[39m()[33m=>[39m{[36mawait[39m [36mnew[39m [33mPromise[39m(n[33m=>[39msetImmediate(n))[33m,[39mge([32m"library stopping"[39m)[33m;[39m[36mlet[39m r[33m=[39m{traceparent[33m:[39m[36mthis[39m[33m.[39mtracingHelper[33m.[39mgetTraceParent()}[33m;[39m[36mawait[39m [36mthis[39m[33m.[39mengine[33m?[39m[33m.[39mdisconnect([33mJSON[39m[33m.[39mstringify(r))[33m,[39m[36mthis[39m[33m.[39mengine[33m?[39m[33m.[39mfree[33m&&[39m[36mthis[39m[33m.[39mengine[33m.[39mfree()[33m,[39m[36mthis[39m[33m.[39mengine[33m=[39m[36mvoid[39m [35m0[39m[33m,[39m[36mthis[39m[33m.[39mlibraryStarted[33m=[39m[33m![39m[35m1[39m[33m,[39m[36mthis[39m[33m.[39mlibraryStoppingPromise[33m=[39m[36mvoid[39m [35m0[39m[33m,[39m[36mthis[39m[33m.[39mlibraryInstantiationPromise[33m=[39m[36mvoid[39m [35m0[39m[33m,[39m[36mawait[39m([36mawait[39m [36mthis[39m[33m.[39madapterPromise)[33m?[39m[33m.[39mdispose()[33m,[39m[36mthis[39m[33m.[39madapterPromise[33m=[39m[36mvoid[39m [35m0[39m[33m,[39mge([32m"library stopped"[39m)}[33m;[39m[36mreturn[39m [36mthis[39m[33m.[39mlibraryStoppingPromise[33m=[39m[36mthis[39m[33m.[39mtracingHelper[33m.[39mrunInChildSpan([32m"disconnect"[39m[33m,[39me)[33m,[39m[36mthis[39m[33m.[39mlibraryStoppingPromise}version(){[36mreturn[39m [36mthis[39m[33m.[39mversionInfo[33m=[39m[36mthis[39m[33m.[39mlibrary[33m?[39m[33m.[39mversion()[33m,[39m[36mthis[39m[33m.[39mversionInfo[33m?[39m[33m.[39mversion[33m?[39m[33m?[39m[32m"unknown"[39m}debugPanic(e){[36mreturn[39m [36mthis[39m[33m.[39mlibrary[33m?[39m[33m.[39mdebugPanic(e)}[36masync[39m request(e[33m,[39m{traceparent[33m:[39mr[33m,[39minteractiveTransaction[33m:[39mn}){ge([32m`sending request, this.libraryStarted: ${this.libraryStarted}`[39m)[33m;[39m[36mlet[39m i[33m=[39m[33mJSON[39m[33m.[39mstringify({traceparent[33m:[39mr})[33m,[39mo[33m=[39m[33mJSON[39m[33m.[39mstringify(e)[33m;[39m[36mtry[39m{[36mawait[39m [36mthis[39m[33m.[39mstart()[33m;[39m[36mlet[39m s[33m=[39m[36mawait[39m [36mthis[39m[33m.[39madapterPromise[33m;[39m[36mthis[39m[33m.[39mexecutingQueryPromise[33m=[39m[36mthis[39m[33m.[39mengine[33m?[39m[33m.[39mquery(o[33m,[39mi[33m,[39mn[33m?[39m[33m.[39mid)[33m,[39m[36mthis[39m[33m.[39mlastQuery[33m=[39mo[33m;[39m[36mlet[39m a[33m=[39m[36mthis[39m[33m.[39mparseEngineResponse([36mawait[39m [36mthis[39m[33m.[39mexecutingQueryPromise)[33m;[39m[36mif[39m(a[33m.[39merrors)[36mthrow[39m a[33m.[39merrors[33m.[39mlength[33m===[39m[35m1[39m[33m?[39m[36mthis[39m[33m.[39mbuildQueryError(a[33m.[39merrors[[35m0[39m][33m,[39ms[33m?[39m[33m.[39merrorRegistry)[33m:[39m[36mnew[39m [33mQ[39m([33mJSON[39m[33m.[39mstringify(a[33m.[39merrors)[33m,[39m{clientVersion[33m:[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion})[33m;[39m[36mif[39m([36mthis[39m[33m.[39mloggerRustPanic)[36mthrow[39m [36mthis[39m[33m.[39mloggerRustPanic[33m;[39m[36mreturn[39m{data[33m:[39ma}}[36mcatch[39m(s){[36mif[39m(s [36minstanceof[39m [33mI[39m)[36mthrow[39m s[33m;[39ms[33m.[39mcode[33m===[39m[32m"GenericFailure"[39m[33m&&[39ms[33m.[39mmessage[33m?[39m[33m.[39mstartsWith([32m"PANIC:"[39m)[33m;[39m[36mlet[39m a[33m=[39m[36mthis[39m[33m.[39mparseRequestError(s[33m.[39mmessage)[33m;[39m[36mthrow[39m [36mtypeof[39m a[33m==[39m[32m"string"[39m[33m?[39ms[33m:[39m[36mnew[39m [33mQ[39m([32m`${a.message}[39m
 [90m    |[39m                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
 [90m 15 |[39m [32m${a.backtrace}`[39m[33m,[39m{clientVersion[33m:[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion})}}[36masync[39m requestBatch(e[33m,[39m{transaction[33m:[39mr[33m,[39mtraceparent[33m:[39mn}){ge([32m"requestBatch"[39m)[33m;[39m[36mlet[39m i[33m=[39mur(e[33m,[39mr)[33m;[39m[36mawait[39m [36mthis[39m[33m.[39mstart()[33m;[39m[36mlet[39m o[33m=[39m[36mawait[39m [36mthis[39m[33m.[39madapterPromise[33m;[39m[36mthis[39m[33m.[39mlastQuery[33m=[39m[33mJSON[39m[33m.[39mstringify(i)[33m,[39m[36mthis[39m[33m.[39mexecutingQueryPromise[33m=[39m[36mthis[39m[33m.[39mengine[33m?[39m[33m.[39mquery([36mthis[39m[33m.[39mlastQuery[33m,[39m[33mJSON[39m[33m.[39mstringify({traceparent[33m:[39mn})[33m,[39mgo(r))[33m;[39m[36mlet[39m s[33m=[39m[36mawait[39m [36mthis[39m[33m.[39mexecutingQueryPromise[33m,[39ma[33m=[39m[36mthis[39m[33m.[39mparseEngineResponse(s)[33m;[39m[36mif[39m(a[33m.[39merrors)[36mthrow[39m a[33m.[39merrors[33m.[39mlength[33m===[39m[35m1[39m[33m?[39m[36mthis[39m[33m.[39mbuildQueryError(a[33m.[39merrors[[35m0[39m][33m,[39mo[33m?[39m[33m.[39merrorRegistry)[33m:[39m[36mnew[39m [33mQ[39m([33mJSON[39m[33m.[39mstringify(a[33m.[39merrors)[33m,[39m{clientVersion[33m:[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion})[33m;[39m[36mlet[39m{batchResult[33m:[39mf[33m,[39merrors[33m:[39mh}[33m=[39ma[33m;[39m[36mif[39m([33mArray[39m[33m.[39misArray(f))[36mreturn[39m f[33m.[39mmap([33mC[39m[33m=>[39m[33mC[39m[33m.[39merrors[33m&&[39m[33mC[39m[33m.[39merrors[33m.[39mlength[33m>[39m[35m0[39m[33m?[39m[36mthis[39m[33m.[39mloggerRustPanic[33m?[39m[33m?[39m[36mthis[39m[33m.[39mbuildQueryError([33mC[39m[33m.[39merrors[[35m0[39m][33m,[39mo[33m?[39m[33m.[39merrorRegistry)[33m:[39m{data[33m:[39m[33mC[39m})[33m;[39m[36mthrow[39m h[33m&&[39mh[33m.[39mlength[33m===[39m[35m1[39m[33m?[39m[36mnew[39m [33mError[39m(h[[35m0[39m][33m.[39merror)[33m:[39m[36mnew[39m [33mError[39m([33mJSON[39m[33m.[39mstringify(a))}buildQueryError(e[33m,[39mr){e[33m.[39muser_facing_error[33m.[39mis_panic[33m;[39m[36mlet[39m n[33m=[39m[36mthis[39m[33m.[39mgetExternalAdapterError(e[33m.[39muser_facing_error[33m,[39mr)[33m;[39m[36mreturn[39m n[33m?[39mn[33m.[39merror[33m:[39mcr(e[33m,[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion[33m,[39m[36mthis[39m[33m.[39mconfig[33m.[39mactiveProvider)}getExternalAdapterError(e[33m,[39mr){[36mif[39m(e[33m.[39merror_code[33m===[39m[33mRl[39m[33m&&[39mr){[36mlet[39m n[33m=[39me[33m.[39mmeta[33m?[39m[33m.[39mid[33m;[39m[33mBt[39m([36mtypeof[39m n[33m==[39m[32m"number"[39m[33m,[39m[32m"Malformed external JS error received from the engine"[39m)[33m;[39m[36mlet[39m i[33m=[39mr[33m.[39mconsumeError(n)[33m;[39m[36mreturn[39m [33mBt[39m(i[33m,[39m[32m"External error with reported id was not registered"[39m)[33m,[39mi}}[36masync[39m metrics(e){[36mawait[39m [36mthis[39m[33m.[39mstart()[33m;[39m[36mlet[39m r[33m=[39m[36mawait[39m [36mthis[39m[33m.[39mengine[33m.[39mmetrics([33mJSON[39m[33m.[39mstringify(e))[33m;[39m[36mreturn[39m e[33m.[39mformat[33m===[39m[32m"prometheus"[39m[33m?[39mr[33m:[39m[36mthis[39m[33m.[39mparseEngineResponse(r)}}[33m;[39m[36mfunction[39m [33mIl[39m(t){[36mreturn[39m [36mtypeof[39m t[33m==[39m[32m"object"[39m[33m&&[39mt[33m!==[39m[36mnull[39m[33m&&[39mt[33m.[39merror_code[33m!==[39m[36mvoid[39m [35m0[39m}u()[33m;[39mc()[33m;[39mm()[33m;[39mp()[33m;[39md()[33m;[39ml()[33m;[39m[36mvar[39m [33mCt[39m[33m=[39m[32m"Accelerate has not been setup correctly. Make sure your client is using `.$extends(withAccelerate())`. See https://pris.ly/d/accelerate-getting-started"[39m[33m,[39mfr[33m=[39m[36mclass[39m{constructor(e){[36mthis[39m[33m.[39mconfig[33m=[39me[33m;[39m[36mthis[39m[33m.[39mresolveDatasourceUrl[33m=[39m[36mthis[39m[33m.[39mconfig[33m.[39maccelerateUtils[33m?[39m[33m.[39mresolveDatasourceUrl[33m,[39m[36mthis[39m[33m.[39mgetBatchRequestPayload[33m=[39m[36mthis[39m[33m.[39mconfig[33m.[39maccelerateUtils[33m?[39m[33m.[39mgetBatchRequestPayload[33m,[39m[36mthis[39m[33m.[39mprismaGraphQLToJSError[33m=[39m[36mthis[39m[33m.[39mconfig[33m.[39maccelerateUtils[33m?[39m[33m.[39mprismaGraphQLToJSError[33m,[39m[36mthis[39m[33m.[39m[33mPrismaClientUnknownRequestError[39m[33m=[39m[36mthis[39m[33m.[39mconfig[33m.[39maccelerateUtils[33m?[39m[33m.[39m[33mPrismaClientUnknownRequestError[39m[33m,[39m[36mthis[39m[33m.[39m[33mPrismaClientInitializationError[39m[33m=[39m[36mthis[39m[33m.[39mconfig[33m.[39maccelerateUtils[33m?[39m[33m.[39m[33mPrismaClientInitializationError[39m[33m,[39m[36mthis[39m[33m.[39m[33mPrismaClientKnownRequestError[39m[33m=[39m[36mthis[39m[33m.[39mconfig[33m.[39maccelerateUtils[33m?[39m[33m.[39m[33mPrismaClientKnownRequestError[39m[33m,[39m[36mthis[39m[33m.[39mdebug[33m=[39m[36mthis[39m[33m.[39mconfig[33m.[39maccelerateUtils[33m?[39m[33m.[39mdebug[33m,[39m[36mthis[39m[33m.[39mengineVersion[33m=[39m[36mthis[39m[33m.[39mconfig[33m.[39maccelerateUtils[33m?[39m[33m.[39mengineVersion[33m,[39m[36mthis[39m[33m.[39mclientVersion[33m=[39m[36mthis[39m[33m.[39mconfig[33m.[39maccelerateUtils[33m?[39m[33m.[39mclientVersion}name[33m=[39m[32m"AccelerateEngine"[39m[33m;[39mresolveDatasourceUrl[33m;[39mgetBatchRequestPayload[33m;[39mprismaGraphQLToJSError[33m;[39m[33mPrismaClientUnknownRequestError[39m[33m;[39m[33mPrismaClientInitializationError[39m[33m;[39m[33mPrismaClientKnownRequestError[39m[33m;[39mdebug[33m;[39mengineVersion[33m;[39mclientVersion[33m;[39monBeforeExit(e){}[36masync[39m start(){}[36masync[39m stop(){}version(e){[36mreturn[39m[32m"unknown"[39m}transaction(e[33m,[39mr[33m,[39mn){[36mthrow[39m [36mnew[39m [33mI[39m([33mCt[39m[33m,[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion)}metrics(e){[36mthrow[39m [36mnew[39m [33mI[39m([33mCt[39m[33m,[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion)}request(e[33m,[39mr){[36mthrow[39m [36mnew[39m [33mI[39m([33mCt[39m[33m,[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion)}requestBatch(e[33m,[39mr){[36mthrow[39m [36mnew[39m [33mI[39m([33mCt[39m[33m,[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion)}applyPendingMigrations(){[36mthrow[39m [36mnew[39m [33mI[39m([33mCt[39m[33m,[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion)}}[33m;[39mu()[33m;[39mc()[33m;[39mm()[33m;[39mp()[33m;[39md()[33m;[39ml()[33m;[39m[36mfunction[39m ho({url[33m:[39mt[33m,[39madapter[33m:[39me[33m,[39mcopyEngine[33m:[39mr[33m,[39mtargetBuildType[33m:[39mn}){[36mlet[39m i[33m=[39m[][33m,[39mo[33m=[39m[][33m,[39ms[33m=[39m[33mO[39m[33m=>[39m{i[33m.[39mpush({_tag[33m:[39m[32m"warning"[39m[33m,[39mvalue[33m:[39m[33mO[39m})}[33m,[39ma[33m=[39m[33mO[39m[33m=>[39m{[36mlet[39m [33mD[39m[33m=[39m[33mO[39m[33m.[39mjoin([32m`[39m
 [90m 16 |[39m [32m`[39m)[33m;[39mo[33m.[39mpush({_tag[33m:[39m[32m"error"[39m[33m,[39mvalue[33m:[39m[33mD[39m})}[33m,[39mf[33m=[39m[33m![39m[33m![39mt[33m?[39m[33m.[39mstartsWith([32m"prisma://"[39m)[33m,[39mh[33m=[39m_r(t)[33m,[39m[33mC[39m[33m=[39m[33m![39m[33m![39me[33m,[39m[33mA[39m[33m=[39mf[33m||[39mh[33m;[39m[33m![39m[33mC[39m[33m&&[39mr[33m&&[39m[33mA[39m[33m&&[39mn[33m!==[39m[32m"client"[39m[33m&&[39mn[33m!==[39m[32m"wasm-compiler-edge"[39m[33m&&[39ms([[32m"recommend--no-engine"[39m[33m,[39m[32m"In production, we recommend using `prisma generate --no-engine` (See: `prisma generate --help`)"[39m])[33m;[39m[36mlet[39m k[33m=[39m[33mA[39m[33m||[39m[33m![39mr[33m;[39m[33mC[39m[33m&&[39m(k[33m||[39mn[33m===[39m[32m"edge"[39m)[33m&&[39m(n[33m===[39m[32m"edge"[39m[33m?[39ma([[32m"Prisma Client was configured to use the `adapter` option but it was imported via its `/edge` endpoint."[39m[33m,[39m[32m"Please either remove the `/edge` endpoint or remove the `adapter` from the Prisma Client constructor."[39m])[33m:[39m[33mA[39m[33m?[39ma([[32m"You've provided both a driver adapter and an Accelerate database URL. Driver adapters currently cannot connect to Accelerate."[39m[33m,[39m[32m"Please provide either a driver adapter with a direct database URL or an Accelerate URL and no driver adapter."[39m])[33m:[39mr[33m||[39ma([[32m"Prisma Client was configured to use the `adapter` option but `prisma generate` was run with `--no-engine`."[39m[33m,[39m[32m"Please run `prisma generate` without `--no-engine` to be able to use Prisma Client with the adapter."[39m]))[33m;[39m[36mlet[39m [33mR[39m[33m=[39m{accelerate[33m:[39mk[33m,[39mppg[33m:[39mh[33m,[39mdriverAdapters[33m:[39m[33mC[39m}[33m;[39m[36mfunction[39m _([33mO[39m){[36mreturn[39m [33mO[39m[33m.[39mlength[33m>[39m[35m0[39m}[36mreturn[39m _(o)[33m?[39m{ok[33m:[39m[33m![39m[35m1[39m[33m,[39mdiagnostics[33m:[39m{warnings[33m:[39mi[33m,[39merrors[33m:[39mo}[33m,[39misUsing[33m:[39m[33mR[39m}[33m:[39m{ok[33m:[39m[33m![39m[35m0[39m[33m,[39mdiagnostics[33m:[39m{warnings[33m:[39mi}[33m,[39misUsing[33m:[39m[33mR[39m}}[36mfunction[39m bo({copyEngine[33m:[39mt[33m=[39m[33m![39m[35m0[39m}[33m,[39me){[36mlet[39m r[33m;[39m[36mtry[39m{r[33m=[39mdr({inlineDatasources[33m:[39me[33m.[39minlineDatasources[33m,[39moverrideDatasources[33m:[39me[33m.[39moverrideDatasources[33m,[39menv[33m:[39m{[33m...[39me[33m.[39menv[33m,[39m[33m...[39mg[33m.[39menv}[33m,[39mclientVersion[33m:[39me[33m.[39mclientVersion})}[36mcatch[39m{}[36mlet[39m{ok[33m:[39mn[33m,[39misUsing[33m:[39mi[33m,[39mdiagnostics[33m:[39mo}[33m=[39mho({url[33m:[39mr[33m,[39madapter[33m:[39me[33m.[39madapter[33m,[39mcopyEngine[33m:[39mt[33m,[39mtargetBuildType[33m:[39m[32m"wasm-engine-edge"[39m})[33m;[39m[36mfor[39m([36mlet[39m [33mA[39m [36mof[39m o[33m.[39mwarnings)at([33m...[39m[33mA[39m[33m.[39mvalue)[33m;[39m[36mif[39m([33m![39mn){[36mlet[39m [33mA[39m[33m=[39mo[33m.[39merrors[[35m0[39m][33m;[39m[36mthrow[39m [36mnew[39m [33mK[39m([33mA[39m[33m.[39mvalue[33m,[39m{clientVersion[33m:[39me[33m.[39mclientVersion})}[36mlet[39m s[33m=[39m[33mNe[39m(e[33m.[39mgenerator)[33m,[39ma[33m=[39ms[33m===[39m[32m"library"[39m[33m,[39mf[33m=[39ms[33m===[39m[32m"binary"[39m[33m,[39mh[33m=[39ms[33m===[39m[32m"client"[39m[33m,[39m[33mC[39m[33m=[39m(i[33m.[39maccelerate[33m||[39mi[33m.[39mppg)[33m&&[39m[33m![39mi[33m.[39mdriverAdapters[33m;[39m[36mreturn[39m i[33m.[39maccelerate[33m,[39mi[33m.[39mdriverAdapters[33m?[39m[36mnew[39m [33mTt[39m(e)[33m:[39mi[33m.[39maccelerate[33m?[39m[36mnew[39m fr(e)[33m:[39m[36mnew[39m sn({clientVersion[33m:[39me[33m.[39mclientVersion})}[36mvar[39m sn[33m=[39m[36mclass[39m{constructor(e){[36mreturn[39m [36mnew[39m [33mProxy[39m([36mthis[39m[33m,[39m{[36mget[39m(r[33m,[39mn){[36mlet[39m i[33m=[39m[32m`In order to run Prisma Client on edge runtime, either:[39m
 [90m 17 |[39m [32m- Use Prisma Accelerate: https://pris.ly/d/accelerate[39m[0m

A Node.js API is used (setImmediate at line: 14) which is not supported in the Edge Runtime.
Learn more: https://nextjs.org/docs/api-reference/edge-runtime

Import trace:
  Edge Middleware:
    ./src/lib/prisma/generated/runtime/wasm-engine-edge.js
    ./src/lib/prisma/generated/wasm.js
    ./src/lib/prisma/generated/default.js
    ./src/lib/prisma/connection.ts
    ./src/lib/prisma/permission-queries.ts
    ./src/middleware.ts


 âš  ./src/lib/utils/session-utils.ts:6:1
Ecmascript file had an error
[0m [90m 4 |[39m [90m */[39m
 [90m 5 |[39m
[31m[1m>[22m[39m[90m 6 |[39m [36mimport[39m { randomUUID } [36mfrom[39m [32m"crypto"[39m
 [90m   |[39m [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
 [90m 7 |[39m
 [90m 8 |[39m [90m/**[39m
 [90m 9 |[39m [90m * Genera un ID Ãºnico para una sesiÃ³n[39m[0m

A Node.js module is loaded ('crypto' at line 6) which is not supported in the Edge Runtime.
Learn More: https://nextjs.org/docs/messages/node-module-in-edge-runtime

Import trace:
  Edge Middleware:
    ./src/lib/utils/session-utils.ts
    ./src/lib/auth.ts
    ./src/middleware.ts


 HEAD /dashboard 404 in 116ms
 âš  ./src/lib/prisma/generated/runtime/wasm-engine-edge.js:14:7269
Ecmascript file had an error
[0m [90m 12 |[39m [32m[39m
 [90m 13 |[39m [32mIn Cloudflare module Workers, environment variables are available only in the Worker's \`env\` parameter of \`fetch\`.[39m
[31m[1m>[22m[39m[90m 14 |[39m [32mTo solve this, provide the connection string directly: https://pris.ly/d/cloudflare-datasource-url`[39m[33m,[39mn)[33m:[39m[36mnew[39m [33mI[39m([32m`error: Environment variable not found: ${s.fromEnvVar}.`[39m[33m,[39mn)[33m;[39m[36mif[39m(i[33m===[39m[36mvoid[39m [35m0[39m)[36mthrow[39m [36mnew[39m [33mI[39m([32m"error: Missing URL environment variable, value, or override."[39m[33m,[39mn)[33m;[39m[36mreturn[39m i}u()[33m;[39mc()[33m;[39mm()[33m;[39mp()[33m;[39md()[33m;[39ml()[33m;[39mu()[33m;[39mc()[33m;[39mm()[33m;[39mp()[33m;[39md()[33m;[39ml()[33m;[39m[36mfunction[39m go(t){[36mif[39m(t[33m?[39m[33m.[39mkind[33m===[39m[32m"itx"[39m)[36mreturn[39m t[33m.[39moptions[33m.[39mid}u()[33m;[39mc()[33m;[39mm()[33m;[39mp()[33m;[39md()[33m;[39ml()[33m;[39m[36mvar[39m nn[33m,[39myo[33m=[39m{[36masync[39m loadLibrary(t){[36mlet[39m{clientVersion[33m:[39me[33m,[39madapter[33m:[39mr[33m,[39mengineWasm[33m:[39mn}[33m=[39mt[33m;[39m[36mif[39m(r[33m===[39m[36mvoid[39m [35m0[39m)[36mthrow[39m [36mnew[39m [33mI[39m([32m`The \`adapter\` option for \`PrismaClient\` is required in this context (${Ze().prettyName})`[39m[33m,[39me)[33m;[39m[36mif[39m(n[33m===[39m[36mvoid[39m [35m0[39m)[36mthrow[39m [36mnew[39m [33mI[39m([32m"WASM engine was unexpectedly `undefined`"[39m[33m,[39me)[33m;[39mnn[33m===[39m[36mvoid[39m [35m0[39m[33m&&[39m(nn[33m=[39m([36masync[39m()[33m=>[39m{[36mlet[39m o[33m=[39m[36mawait[39m n[33m.[39mgetRuntime()[33m,[39ms[33m=[39m[36mawait[39m n[33m.[39mgetQueryEngineWasmModule()[33m;[39m[36mif[39m(s[33m==[39m[36mnull[39m)[36mthrow[39m [36mnew[39m [33mI[39m([32m"The loaded wasm module was unexpectedly `undefined` or `null` once loaded"[39m[33m,[39me)[33m;[39m[36mlet[39m a[33m=[39m{[32m"./query_engine_bg.js"[39m[33m:[39mo}[33m,[39mf[33m=[39m[36mnew[39m [33mWebAssembly[39m[33m.[39m[33mInstance[39m(s[33m,[39ma)[33m,[39mh[33m=[39mf[33m.[39mexports[33m.[39m__wbindgen_start[33m;[39m[36mreturn[39m o[33m.[39m__wbg_set_wasm(f[33m.[39mexports)[33m,[39mh()[33m,[39mo[33m.[39m[33mQueryEngine[39m})())[33m;[39m[36mlet[39m i[33m=[39m[36mawait[39m nn[33m;[39m[36mreturn[39m{debugPanic(){[36mreturn[39m [33mPromise[39m[33m.[39mreject([32m"{}"[39m)}[33m,[39mdmmf(){[36mreturn[39m [33mPromise[39m[33m.[39mresolve([32m"{}"[39m)}[33m,[39mversion(){[36mreturn[39m{commit[33m:[39m[32m"unknown"[39m[33m,[39mversion[33m:[39m[32m"unknown"[39m}}[33m,[39m[33mQueryEngine[39m[33m:[39mi}}}[33m;[39m[36mvar[39m [33mRl[39m[33m=[39m[32m"P2036"[39m[33m,[39mge[33m=[39m[33mG[39m([32m"prisma:client:libraryEngine"[39m)[33m;[39m[36mfunction[39m [33mSl[39m(t){[36mreturn[39m t[33m.[39mitem_type[33m===[39m[32m"query"[39m[33m&&[39m[32m"query"[39m[36min[39m t}[36mfunction[39m [33mOl[39m(t){[36mreturn[39m[32m"level"[39m[36min[39m t[33m?[39mt[33m.[39mlevel[33m===[39m[32m"error"[39m[33m&&[39mt[33m.[39mmessage[33m===[39m[32m"PANIC"[39m[33m:[39m[33m![39m[35m1[39m}[36mvar[39m oO[33m=[39m[[33m...[39mkr[33m,[39m[32m"native"[39m][33m,[39mkl[33m=[39m[35m0xffffffffffffffff[39mn[33m,[39mon[33m=[39m[35m1[39mn[33m;[39m[36mfunction[39m [33mDl[39m(){[36mlet[39m t[33m=[39mon[33m++[39m[33m;[39m[36mreturn[39m on[33m>[39mkl[33m&&[39m(on[33m=[39m[35m1[39mn)[33m,[39mt}[36mvar[39m [33mTt[39m[33m=[39m[36mclass[39m{name[33m=[39m[32m"LibraryEngine"[39m[33m;[39mengine[33m;[39mlibraryInstantiationPromise[33m;[39mlibraryStartingPromise[33m;[39mlibraryStoppingPromise[33m;[39mlibraryStarted[33m;[39mexecutingQueryPromise[33m;[39mconfig[33m;[39m[33mQueryEngineConstructor[39m[33m;[39mlibraryLoader[33m;[39mlibrary[33m;[39mlogEmitter[33m;[39mlibQueryEnginePath[33m;[39mbinaryTarget[33m;[39mdatasourceOverrides[33m;[39mdatamodel[33m;[39mlogQueries[33m;[39mlogLevel[33m;[39mlastQuery[33m;[39mloggerRustPanic[33m;[39mtracingHelper[33m;[39madapterPromise[33m;[39mversionInfo[33m;[39mconstructor(e[33m,[39mr){[36mthis[39m[33m.[39mlibraryLoader[33m=[39mr[33m?[39m[33m?[39myo[33m,[39m[36mthis[39m[33m.[39mconfig[33m=[39me[33m,[39m[36mthis[39m[33m.[39mlibraryStarted[33m=[39m[33m![39m[35m1[39m[33m,[39m[36mthis[39m[33m.[39mlogQueries[33m=[39me[33m.[39mlogQueries[33m?[39m[33m?[39m[33m![39m[35m1[39m[33m,[39m[36mthis[39m[33m.[39mlogLevel[33m=[39me[33m.[39mlogLevel[33m?[39m[33m?[39m[32m"error"[39m[33m,[39m[36mthis[39m[33m.[39mlogEmitter[33m=[39me[33m.[39mlogEmitter[33m,[39m[36mthis[39m[33m.[39mdatamodel[33m=[39me[33m.[39minlineSchema[33m,[39m[36mthis[39m[33m.[39mtracingHelper[33m=[39me[33m.[39mtracingHelper[33m,[39me[33m.[39menableDebugLogs[33m&&[39m([36mthis[39m[33m.[39mlogLevel[33m=[39m[32m"debug"[39m)[33m;[39m[36mlet[39m n[33m=[39m[33mObject[39m[33m.[39mkeys(e[33m.[39moverrideDatasources)[[35m0[39m][33m,[39mi[33m=[39me[33m.[39moverrideDatasources[n][33m?[39m[33m.[39murl[33m;[39mn[33m!==[39m[36mvoid[39m [35m0[39m[33m&&[39mi[33m!==[39m[36mvoid[39m [35m0[39m[33m&&[39m([36mthis[39m[33m.[39mdatasourceOverrides[33m=[39m{[n][33m:[39mi})[33m,[39m[36mthis[39m[33m.[39mlibraryInstantiationPromise[33m=[39m[36mthis[39m[33m.[39minstantiateLibrary()}wrapEngine(e){[36mreturn[39m{applyPendingMigrations[33m:[39me[33m.[39mapplyPendingMigrations[33m?[39m[33m.[39mbind(e)[33m,[39mcommitTransaction[33m:[39m[36mthis[39m[33m.[39mwithRequestId(e[33m.[39mcommitTransaction[33m.[39mbind(e))[33m,[39mconnect[33m:[39m[36mthis[39m[33m.[39mwithRequestId(e[33m.[39mconnect[33m.[39mbind(e))[33m,[39mdisconnect[33m:[39m[36mthis[39m[33m.[39mwithRequestId(e[33m.[39mdisconnect[33m.[39mbind(e))[33m,[39mmetrics[33m:[39me[33m.[39mmetrics[33m?[39m[33m.[39mbind(e)[33m,[39mquery[33m:[39m[36mthis[39m[33m.[39mwithRequestId(e[33m.[39mquery[33m.[39mbind(e))[33m,[39mrollbackTransaction[33m:[39m[36mthis[39m[33m.[39mwithRequestId(e[33m.[39mrollbackTransaction[33m.[39mbind(e))[33m,[39msdlSchema[33m:[39me[33m.[39msdlSchema[33m?[39m[33m.[39mbind(e)[33m,[39mstartTransaction[33m:[39m[36mthis[39m[33m.[39mwithRequestId(e[33m.[39mstartTransaction[33m.[39mbind(e))[33m,[39mtrace[33m:[39me[33m.[39mtrace[33m.[39mbind(e)[33m,[39mfree[33m:[39me[33m.[39mfree[33m?[39m[33m.[39mbind(e)}}withRequestId(e){[36mreturn[39m [36masync[39m([33m...[39mr)[33m=>[39m{[36mlet[39m n[33m=[39m[33mDl[39m()[33m.[39mtoString()[33m;[39m[36mtry[39m{[36mreturn[39m [36mawait[39m e([33m...[39mr[33m,[39mn)}[36mfinally[39m{[36mif[39m([36mthis[39m[33m.[39mtracingHelper[33m.[39misEnabled()){[36mlet[39m i[33m=[39m[36mawait[39m [36mthis[39m[33m.[39mengine[33m?[39m[33m.[39mtrace(n)[33m;[39m[36mif[39m(i){[36mlet[39m o[33m=[39m[33mJSON[39m[33m.[39mparse(i)[33m;[39m[36mthis[39m[33m.[39mtracingHelper[33m.[39mdispatchEngineSpans(o[33m.[39mspans)}}}}}[36masync[39m applyPendingMigrations(){[36mthrow[39m [36mnew[39m [33mError[39m([32m"Cannot call this method from this type of engine instance"[39m)}[36masync[39m transaction(e[33m,[39mr[33m,[39mn){[36mawait[39m [36mthis[39m[33m.[39mstart()[33m;[39m[36mlet[39m i[33m=[39m[36mawait[39m [36mthis[39m[33m.[39madapterPromise[33m,[39mo[33m=[39m[33mJSON[39m[33m.[39mstringify(r)[33m,[39ms[33m;[39m[36mif[39m(e[33m===[39m[32m"start"[39m){[36mlet[39m f[33m=[39m[33mJSON[39m[33m.[39mstringify({max_wait[33m:[39mn[33m.[39mmaxWait[33m,[39mtimeout[33m:[39mn[33m.[39mtimeout[33m,[39misolation_level[33m:[39mn[33m.[39misolationLevel})[33m;[39ms[33m=[39m[36mawait[39m [36mthis[39m[33m.[39mengine[33m?[39m[33m.[39mstartTransaction(f[33m,[39mo)}[36melse[39m e[33m===[39m[32m"commit"[39m[33m?[39ms[33m=[39m[36mawait[39m [36mthis[39m[33m.[39mengine[33m?[39m[33m.[39mcommitTransaction(n[33m.[39mid[33m,[39mo)[33m:[39me[33m===[39m[32m"rollback"[39m[33m&&[39m(s[33m=[39m[36mawait[39m [36mthis[39m[33m.[39mengine[33m?[39m[33m.[39mrollbackTransaction(n[33m.[39mid[33m,[39mo))[33m;[39m[36mlet[39m a[33m=[39m[36mthis[39m[33m.[39mparseEngineResponse(s)[33m;[39m[36mif[39m([33mIl[39m(a)){[36mlet[39m f[33m=[39m[36mthis[39m[33m.[39mgetExternalAdapterError(a[33m,[39mi[33m?[39m[33m.[39merrorRegistry)[33m;[39m[36mthrow[39m f[33m?[39mf[33m.[39merror[33m:[39m[36mnew[39m [33mZ[39m(a[33m.[39mmessage[33m,[39m{code[33m:[39ma[33m.[39merror_code[33m,[39mclientVersion[33m:[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion[33m,[39mmeta[33m:[39ma[33m.[39mmeta})}[36melse[39m [36mif[39m([36mtypeof[39m a[33m.[39mmessage[33m==[39m[32m"string"[39m)[36mthrow[39m [36mnew[39m [33mQ[39m(a[33m.[39mmessage[33m,[39m{clientVersion[33m:[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion})[33m;[39m[36mreturn[39m a}[36masync[39m instantiateLibrary(){[36mif[39m(ge([32m"internalSetup"[39m)[33m,[39m[36mthis[39m[33m.[39mlibraryInstantiationPromise)[36mreturn[39m [36mthis[39m[33m.[39mlibraryInstantiationPromise[33m;[39m[36mthis[39m[33m.[39mbinaryTarget[33m=[39m[36mawait[39m [36mthis[39m[33m.[39mgetCurrentBinaryTarget()[33m,[39m[36mawait[39m [36mthis[39m[33m.[39mtracingHelper[33m.[39mrunInChildSpan([32m"load_engine"[39m[33m,[39m()[33m=>[39m[36mthis[39m[33m.[39mloadEngine())[33m,[39m[36mthis[39m[33m.[39mversion()}[36masync[39m getCurrentBinaryTarget(){}parseEngineResponse(e){[36mif[39m([33m![39me)[36mthrow[39m [36mnew[39m [33mQ[39m([32m"Response from the Engine was empty"[39m[33m,[39m{clientVersion[33m:[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion})[33m;[39m[36mtry[39m{[36mreturn[39m [33mJSON[39m[33m.[39mparse(e)}[36mcatch[39m{[36mthrow[39m [36mnew[39m [33mQ[39m([32m"Unable to JSON.parse response from engine"[39m[33m,[39m{clientVersion[33m:[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion})}}[36masync[39m loadEngine(){[36mif[39m([33m![39m[36mthis[39m[33m.[39mengine){[36mthis[39m[33m.[39m[33mQueryEngineConstructor[39m[33m||[39m([36mthis[39m[33m.[39mlibrary[33m=[39m[36mawait[39m [36mthis[39m[33m.[39mlibraryLoader[33m.[39mloadLibrary([36mthis[39m[33m.[39mconfig)[33m,[39m[36mthis[39m[33m.[39m[33mQueryEngineConstructor[39m[33m=[39m[36mthis[39m[33m.[39mlibrary[33m.[39m[33mQueryEngine[39m)[33m;[39m[36mtry[39m{[36mlet[39m e[33m=[39m[36mnew[39m w([36mthis[39m)[33m;[39m[36mthis[39m[33m.[39madapterPromise[33m||[39m([36mthis[39m[33m.[39madapterPromise[33m=[39m[36mthis[39m[33m.[39mconfig[33m.[39madapter[33m?[39m[33m.[39mconnect()[33m?[39m[33m.[39mthen(qt))[33m;[39m[36mlet[39m r[33m=[39m[36mawait[39m [36mthis[39m[33m.[39madapterPromise[33m;[39mr[33m&&[39mge([32m"Using driver adapter: %O"[39m[33m,[39mr)[33m,[39m[36mthis[39m[33m.[39mengine[33m=[39m[36mthis[39m[33m.[39mwrapEngine([36mnew[39m [36mthis[39m[33m.[39m[33mQueryEngineConstructor[39m({datamodel[33m:[39m[36mthis[39m[33m.[39mdatamodel[33m,[39menv[33m:[39mg[33m.[39menv[33m,[39mlogQueries[33m:[39m[36mthis[39m[33m.[39mconfig[33m.[39mlogQueries[33m?[39m[33m?[39m[33m![39m[35m1[39m[33m,[39mignoreEnvVarErrors[33m:[39m[33m![39m[35m0[39m[33m,[39mdatasourceOverrides[33m:[39m[36mthis[39m[33m.[39mdatasourceOverrides[33m?[39m[33m?[39m{}[33m,[39mlogLevel[33m:[39m[36mthis[39m[33m.[39mlogLevel[33m,[39mconfigDir[33m:[39m[36mthis[39m[33m.[39mconfig[33m.[39mcwd[33m,[39mengineProtocol[33m:[39m[32m"json"[39m[33m,[39menableTracing[33m:[39m[36mthis[39m[33m.[39mtracingHelper[33m.[39misEnabled()}[33m,[39mn[33m=>[39m{e[33m.[39mderef()[33m?[39m[33m.[39mlogger(n)}[33m,[39mr))}[36mcatch[39m(e){[36mlet[39m r[33m=[39me[33m,[39mn[33m=[39m[36mthis[39m[33m.[39mparseInitError(r[33m.[39mmessage)[33m;[39m[36mthrow[39m [36mtypeof[39m n[33m==[39m[32m"string"[39m[33m?[39mr[33m:[39m[36mnew[39m [33mI[39m(n[33m.[39mmessage[33m,[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion[33m,[39mn[33m.[39merror_code)}}}logger(e){[36mlet[39m r[33m=[39m[36mthis[39m[33m.[39mparseEngineResponse(e)[33m;[39mr[33m&&[39m(r[33m.[39mlevel[33m=[39mr[33m?[39m[33m.[39mlevel[33m.[39mtoLowerCase()[33m?[39m[33m?[39m[32m"unknown"[39m[33m,[39m[33mSl[39m(r)[33m?[39m[36mthis[39m[33m.[39mlogEmitter[33m.[39memit([32m"query"[39m[33m,[39m{timestamp[33m:[39m[36mnew[39m [33mDate[39m[33m,[39mquery[33m:[39mr[33m.[39mquery[33m,[39mparams[33m:[39mr[33m.[39mparams[33m,[39mduration[33m:[39m[33mNumber[39m(r[33m.[39mduration_ms)[33m,[39mtarget[33m:[39mr[33m.[39mmodule_path})[33m:[39m([33mOl[39m(r)[33m,[39m[36mthis[39m[33m.[39mlogEmitter[33m.[39memit(r[33m.[39mlevel[33m,[39m{timestamp[33m:[39m[36mnew[39m [33mDate[39m[33m,[39mmessage[33m:[39mr[33m.[39mmessage[33m,[39mtarget[33m:[39mr[33m.[39mmodule_path})))}parseInitError(e){[36mtry[39m{[36mreturn[39m [33mJSON[39m[33m.[39mparse(e)}[36mcatch[39m{}[36mreturn[39m e}parseRequestError(e){[36mtry[39m{[36mreturn[39m [33mJSON[39m[33m.[39mparse(e)}[36mcatch[39m{}[36mreturn[39m e}onBeforeExit(){[36mthrow[39m [36mnew[39m [33mError[39m([32m'"beforeExit" hook is not applicable to the library engine since Prisma 5.0.0, it is only relevant and implemented for the binary engine. Please add your event listener to the `process` object directly instead.'[39m)}[36masync[39m start(){[36mif[39m([36mthis[39m[33m.[39mlibraryInstantiationPromise[33m||[39m([36mthis[39m[33m.[39mlibraryInstantiationPromise[33m=[39m[36mthis[39m[33m.[39minstantiateLibrary())[33m,[39m[36mawait[39m [36mthis[39m[33m.[39mlibraryInstantiationPromise[33m,[39m[36mawait[39m [36mthis[39m[33m.[39mlibraryStoppingPromise[33m,[39m[36mthis[39m[33m.[39mlibraryStartingPromise)[36mreturn[39m ge([32m`library already starting, this.libraryStarted: ${this.libraryStarted}`[39m)[33m,[39m[36mthis[39m[33m.[39mlibraryStartingPromise[33m;[39m[36mif[39m([36mthis[39m[33m.[39mlibraryStarted)[36mreturn[39m[33m;[39m[36mlet[39m e[33m=[39m[36masync[39m()[33m=>[39m{ge([32m"library starting"[39m)[33m;[39m[36mtry[39m{[36mlet[39m r[33m=[39m{traceparent[33m:[39m[36mthis[39m[33m.[39mtracingHelper[33m.[39mgetTraceParent()}[33m;[39m[36mawait[39m [36mthis[39m[33m.[39mengine[33m?[39m[33m.[39mconnect([33mJSON[39m[33m.[39mstringify(r))[33m,[39m[36mthis[39m[33m.[39mlibraryStarted[33m=[39m[33m![39m[35m0[39m[33m,[39m[36mthis[39m[33m.[39madapterPromise[33m||[39m([36mthis[39m[33m.[39madapterPromise[33m=[39m[36mthis[39m[33m.[39mconfig[33m.[39madapter[33m?[39m[33m.[39mconnect()[33m?[39m[33m.[39mthen(qt))[33m,[39m[36mawait[39m [36mthis[39m[33m.[39madapterPromise[33m,[39mge([32m"library started"[39m)}[36mcatch[39m(r){[36mlet[39m n[33m=[39m[36mthis[39m[33m.[39mparseInitError(r[33m.[39mmessage)[33m;[39m[36mthrow[39m [36mtypeof[39m n[33m==[39m[32m"string"[39m[33m?[39mr[33m:[39m[36mnew[39m [33mI[39m(n[33m.[39mmessage[33m,[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion[33m,[39mn[33m.[39merror_code)}[36mfinally[39m{[36mthis[39m[33m.[39mlibraryStartingPromise[33m=[39m[36mvoid[39m [35m0[39m}}[33m;[39m[36mreturn[39m [36mthis[39m[33m.[39mlibraryStartingPromise[33m=[39m[36mthis[39m[33m.[39mtracingHelper[33m.[39mrunInChildSpan([32m"connect"[39m[33m,[39me)[33m,[39m[36mthis[39m[33m.[39mlibraryStartingPromise}[36masync[39m stop(){[36mif[39m([36mawait[39m [36mthis[39m[33m.[39mlibraryInstantiationPromise[33m,[39m[36mawait[39m [36mthis[39m[33m.[39mlibraryStartingPromise[33m,[39m[36mawait[39m [36mthis[39m[33m.[39mexecutingQueryPromise[33m,[39m[36mthis[39m[33m.[39mlibraryStoppingPromise)[36mreturn[39m ge([32m"library is already stopping"[39m)[33m,[39m[36mthis[39m[33m.[39mlibraryStoppingPromise[33m;[39m[36mif[39m([33m![39m[36mthis[39m[33m.[39mlibraryStarted){[36mawait[39m([36mawait[39m [36mthis[39m[33m.[39madapterPromise)[33m?[39m[33m.[39mdispose()[33m,[39m[36mthis[39m[33m.[39madapterPromise[33m=[39m[36mvoid[39m [35m0[39m[33m;[39m[36mreturn[39m}[36mlet[39m e[33m=[39m[36masync[39m()[33m=>[39m{[36mawait[39m [36mnew[39m [33mPromise[39m(n[33m=>[39msetImmediate(n))[33m,[39mge([32m"library stopping"[39m)[33m;[39m[36mlet[39m r[33m=[39m{traceparent[33m:[39m[36mthis[39m[33m.[39mtracingHelper[33m.[39mgetTraceParent()}[33m;[39m[36mawait[39m [36mthis[39m[33m.[39mengine[33m?[39m[33m.[39mdisconnect([33mJSON[39m[33m.[39mstringify(r))[33m,[39m[36mthis[39m[33m.[39mengine[33m?[39m[33m.[39mfree[33m&&[39m[36mthis[39m[33m.[39mengine[33m.[39mfree()[33m,[39m[36mthis[39m[33m.[39mengine[33m=[39m[36mvoid[39m [35m0[39m[33m,[39m[36mthis[39m[33m.[39mlibraryStarted[33m=[39m[33m![39m[35m1[39m[33m,[39m[36mthis[39m[33m.[39mlibraryStoppingPromise[33m=[39m[36mvoid[39m [35m0[39m[33m,[39m[36mthis[39m[33m.[39mlibraryInstantiationPromise[33m=[39m[36mvoid[39m [35m0[39m[33m,[39m[36mawait[39m([36mawait[39m [36mthis[39m[33m.[39madapterPromise)[33m?[39m[33m.[39mdispose()[33m,[39m[36mthis[39m[33m.[39madapterPromise[33m=[39m[36mvoid[39m [35m0[39m[33m,[39mge([32m"library stopped"[39m)}[33m;[39m[36mreturn[39m [36mthis[39m[33m.[39mlibraryStoppingPromise[33m=[39m[36mthis[39m[33m.[39mtracingHelper[33m.[39mrunInChildSpan([32m"disconnect"[39m[33m,[39me)[33m,[39m[36mthis[39m[33m.[39mlibraryStoppingPromise}version(){[36mreturn[39m [36mthis[39m[33m.[39mversionInfo[33m=[39m[36mthis[39m[33m.[39mlibrary[33m?[39m[33m.[39mversion()[33m,[39m[36mthis[39m[33m.[39mversionInfo[33m?[39m[33m.[39mversion[33m?[39m[33m?[39m[32m"unknown"[39m}debugPanic(e){[36mreturn[39m [36mthis[39m[33m.[39mlibrary[33m?[39m[33m.[39mdebugPanic(e)}[36masync[39m request(e[33m,[39m{traceparent[33m:[39mr[33m,[39minteractiveTransaction[33m:[39mn}){ge([32m`sending request, this.libraryStarted: ${this.libraryStarted}`[39m)[33m;[39m[36mlet[39m i[33m=[39m[33mJSON[39m[33m.[39mstringify({traceparent[33m:[39mr})[33m,[39mo[33m=[39m[33mJSON[39m[33m.[39mstringify(e)[33m;[39m[36mtry[39m{[36mawait[39m [36mthis[39m[33m.[39mstart()[33m;[39m[36mlet[39m s[33m=[39m[36mawait[39m [36mthis[39m[33m.[39madapterPromise[33m;[39m[36mthis[39m[33m.[39mexecutingQueryPromise[33m=[39m[36mthis[39m[33m.[39mengine[33m?[39m[33m.[39mquery(o[33m,[39mi[33m,[39mn[33m?[39m[33m.[39mid)[33m,[39m[36mthis[39m[33m.[39mlastQuery[33m=[39mo[33m;[39m[36mlet[39m a[33m=[39m[36mthis[39m[33m.[39mparseEngineResponse([36mawait[39m [36mthis[39m[33m.[39mexecutingQueryPromise)[33m;[39m[36mif[39m(a[33m.[39merrors)[36mthrow[39m a[33m.[39merrors[33m.[39mlength[33m===[39m[35m1[39m[33m?[39m[36mthis[39m[33m.[39mbuildQueryError(a[33m.[39merrors[[35m0[39m][33m,[39ms[33m?[39m[33m.[39merrorRegistry)[33m:[39m[36mnew[39m [33mQ[39m([33mJSON[39m[33m.[39mstringify(a[33m.[39merrors)[33m,[39m{clientVersion[33m:[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion})[33m;[39m[36mif[39m([36mthis[39m[33m.[39mloggerRustPanic)[36mthrow[39m [36mthis[39m[33m.[39mloggerRustPanic[33m;[39m[36mreturn[39m{data[33m:[39ma}}[36mcatch[39m(s){[36mif[39m(s [36minstanceof[39m [33mI[39m)[36mthrow[39m s[33m;[39ms[33m.[39mcode[33m===[39m[32m"GenericFailure"[39m[33m&&[39ms[33m.[39mmessage[33m?[39m[33m.[39mstartsWith([32m"PANIC:"[39m)[33m;[39m[36mlet[39m a[33m=[39m[36mthis[39m[33m.[39mparseRequestError(s[33m.[39mmessage)[33m;[39m[36mthrow[39m [36mtypeof[39m a[33m==[39m[32m"string"[39m[33m?[39ms[33m:[39m[36mnew[39m [33mQ[39m([32m`${a.message}[39m
 [90m    |[39m                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
 [90m 15 |[39m [32m${a.backtrace}`[39m[33m,[39m{clientVersion[33m:[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion})}}[36masync[39m requestBatch(e[33m,[39m{transaction[33m:[39mr[33m,[39mtraceparent[33m:[39mn}){ge([32m"requestBatch"[39m)[33m;[39m[36mlet[39m i[33m=[39mur(e[33m,[39mr)[33m;[39m[36mawait[39m [36mthis[39m[33m.[39mstart()[33m;[39m[36mlet[39m o[33m=[39m[36mawait[39m [36mthis[39m[33m.[39madapterPromise[33m;[39m[36mthis[39m[33m.[39mlastQuery[33m=[39m[33mJSON[39m[33m.[39mstringify(i)[33m,[39m[36mthis[39m[33m.[39mexecutingQueryPromise[33m=[39m[36mthis[39m[33m.[39mengine[33m?[39m[33m.[39mquery([36mthis[39m[33m.[39mlastQuery[33m,[39m[33mJSON[39m[33m.[39mstringify({traceparent[33m:[39mn})[33m,[39mgo(r))[33m;[39m[36mlet[39m s[33m=[39m[36mawait[39m [36mthis[39m[33m.[39mexecutingQueryPromise[33m,[39ma[33m=[39m[36mthis[39m[33m.[39mparseEngineResponse(s)[33m;[39m[36mif[39m(a[33m.[39merrors)[36mthrow[39m a[33m.[39merrors[33m.[39mlength[33m===[39m[35m1[39m[33m?[39m[36mthis[39m[33m.[39mbuildQueryError(a[33m.[39merrors[[35m0[39m][33m,[39mo[33m?[39m[33m.[39merrorRegistry)[33m:[39m[36mnew[39m [33mQ[39m([33mJSON[39m[33m.[39mstringify(a[33m.[39merrors)[33m,[39m{clientVersion[33m:[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion})[33m;[39m[36mlet[39m{batchResult[33m:[39mf[33m,[39merrors[33m:[39mh}[33m=[39ma[33m;[39m[36mif[39m([33mArray[39m[33m.[39misArray(f))[36mreturn[39m f[33m.[39mmap([33mC[39m[33m=>[39m[33mC[39m[33m.[39merrors[33m&&[39m[33mC[39m[33m.[39merrors[33m.[39mlength[33m>[39m[35m0[39m[33m?[39m[36mthis[39m[33m.[39mloggerRustPanic[33m?[39m[33m?[39m[36mthis[39m[33m.[39mbuildQueryError([33mC[39m[33m.[39merrors[[35m0[39m][33m,[39mo[33m?[39m[33m.[39merrorRegistry)[33m:[39m{data[33m:[39m[33mC[39m})[33m;[39m[36mthrow[39m h[33m&&[39mh[33m.[39mlength[33m===[39m[35m1[39m[33m?[39m[36mnew[39m [33mError[39m(h[[35m0[39m][33m.[39merror)[33m:[39m[36mnew[39m [33mError[39m([33mJSON[39m[33m.[39mstringify(a))}buildQueryError(e[33m,[39mr){e[33m.[39muser_facing_error[33m.[39mis_panic[33m;[39m[36mlet[39m n[33m=[39m[36mthis[39m[33m.[39mgetExternalAdapterError(e[33m.[39muser_facing_error[33m,[39mr)[33m;[39m[36mreturn[39m n[33m?[39mn[33m.[39merror[33m:[39mcr(e[33m,[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion[33m,[39m[36mthis[39m[33m.[39mconfig[33m.[39mactiveProvider)}getExternalAdapterError(e[33m,[39mr){[36mif[39m(e[33m.[39merror_code[33m===[39m[33mRl[39m[33m&&[39mr){[36mlet[39m n[33m=[39me[33m.[39mmeta[33m?[39m[33m.[39mid[33m;[39m[33mBt[39m([36mtypeof[39m n[33m==[39m[32m"number"[39m[33m,[39m[32m"Malformed external JS error received from the engine"[39m)[33m;[39m[36mlet[39m i[33m=[39mr[33m.[39mconsumeError(n)[33m;[39m[36mreturn[39m [33mBt[39m(i[33m,[39m[32m"External error with reported id was not registered"[39m)[33m,[39mi}}[36masync[39m metrics(e){[36mawait[39m [36mthis[39m[33m.[39mstart()[33m;[39m[36mlet[39m r[33m=[39m[36mawait[39m [36mthis[39m[33m.[39mengine[33m.[39mmetrics([33mJSON[39m[33m.[39mstringify(e))[33m;[39m[36mreturn[39m e[33m.[39mformat[33m===[39m[32m"prometheus"[39m[33m?[39mr[33m:[39m[36mthis[39m[33m.[39mparseEngineResponse(r)}}[33m;[39m[36mfunction[39m [33mIl[39m(t){[36mreturn[39m [36mtypeof[39m t[33m==[39m[32m"object"[39m[33m&&[39mt[33m!==[39m[36mnull[39m[33m&&[39mt[33m.[39merror_code[33m!==[39m[36mvoid[39m [35m0[39m}u()[33m;[39mc()[33m;[39mm()[33m;[39mp()[33m;[39md()[33m;[39ml()[33m;[39m[36mvar[39m [33mCt[39m[33m=[39m[32m"Accelerate has not been setup correctly. Make sure your client is using `.$extends(withAccelerate())`. See https://pris.ly/d/accelerate-getting-started"[39m[33m,[39mfr[33m=[39m[36mclass[39m{constructor(e){[36mthis[39m[33m.[39mconfig[33m=[39me[33m;[39m[36mthis[39m[33m.[39mresolveDatasourceUrl[33m=[39m[36mthis[39m[33m.[39mconfig[33m.[39maccelerateUtils[33m?[39m[33m.[39mresolveDatasourceUrl[33m,[39m[36mthis[39m[33m.[39mgetBatchRequestPayload[33m=[39m[36mthis[39m[33m.[39mconfig[33m.[39maccelerateUtils[33m?[39m[33m.[39mgetBatchRequestPayload[33m,[39m[36mthis[39m[33m.[39mprismaGraphQLToJSError[33m=[39m[36mthis[39m[33m.[39mconfig[33m.[39maccelerateUtils[33m?[39m[33m.[39mprismaGraphQLToJSError[33m,[39m[36mthis[39m[33m.[39m[33mPrismaClientUnknownRequestError[39m[33m=[39m[36mthis[39m[33m.[39mconfig[33m.[39maccelerateUtils[33m?[39m[33m.[39m[33mPrismaClientUnknownRequestError[39m[33m,[39m[36mthis[39m[33m.[39m[33mPrismaClientInitializationError[39m[33m=[39m[36mthis[39m[33m.[39mconfig[33m.[39maccelerateUtils[33m?[39m[33m.[39m[33mPrismaClientInitializationError[39m[33m,[39m[36mthis[39m[33m.[39m[33mPrismaClientKnownRequestError[39m[33m=[39m[36mthis[39m[33m.[39mconfig[33m.[39maccelerateUtils[33m?[39m[33m.[39m[33mPrismaClientKnownRequestError[39m[33m,[39m[36mthis[39m[33m.[39mdebug[33m=[39m[36mthis[39m[33m.[39mconfig[33m.[39maccelerateUtils[33m?[39m[33m.[39mdebug[33m,[39m[36mthis[39m[33m.[39mengineVersion[33m=[39m[36mthis[39m[33m.[39mconfig[33m.[39maccelerateUtils[33m?[39m[33m.[39mengineVersion[33m,[39m[36mthis[39m[33m.[39mclientVersion[33m=[39m[36mthis[39m[33m.[39mconfig[33m.[39maccelerateUtils[33m?[39m[33m.[39mclientVersion}name[33m=[39m[32m"AccelerateEngine"[39m[33m;[39mresolveDatasourceUrl[33m;[39mgetBatchRequestPayload[33m;[39mprismaGraphQLToJSError[33m;[39m[33mPrismaClientUnknownRequestError[39m[33m;[39m[33mPrismaClientInitializationError[39m[33m;[39m[33mPrismaClientKnownRequestError[39m[33m;[39mdebug[33m;[39mengineVersion[33m;[39mclientVersion[33m;[39monBeforeExit(e){}[36masync[39m start(){}[36masync[39m stop(){}version(e){[36mreturn[39m[32m"unknown"[39m}transaction(e[33m,[39mr[33m,[39mn){[36mthrow[39m [36mnew[39m [33mI[39m([33mCt[39m[33m,[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion)}metrics(e){[36mthrow[39m [36mnew[39m [33mI[39m([33mCt[39m[33m,[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion)}request(e[33m,[39mr){[36mthrow[39m [36mnew[39m [33mI[39m([33mCt[39m[33m,[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion)}requestBatch(e[33m,[39mr){[36mthrow[39m [36mnew[39m [33mI[39m([33mCt[39m[33m,[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion)}applyPendingMigrations(){[36mthrow[39m [36mnew[39m [33mI[39m([33mCt[39m[33m,[39m[36mthis[39m[33m.[39mconfig[33m.[39mclientVersion)}}[33m;[39mu()[33m;[39mc()[33m;[39mm()[33m;[39mp()[33m;[39md()[33m;[39ml()[33m;[39m[36mfunction[39m ho({url[33m:[39mt[33m,[39madapter[33m:[39me[33m,[39mcopyEngine[33m:[39mr[33m,[39mtargetBuildType[33m:[39mn}){[36mlet[39m i[33m=[39m[][33m,[39mo[33m=[39m[][33m,[39ms[33m=[39m[33mO[39m[33m=>[39m{i[33m.[39mpush({_tag[33m:[39m[32m"warning"[39m[33m,[39mvalue[33m:[39m[33mO[39m})}[33m,[39ma[33m=[39m[33mO[39m[33m=>[39m{[36mlet[39m [33mD[39m[33m=[39m[33mO[39m[33m.[39mjoin([32m`[39m
 [90m 16 |[39m [32m`[39m)[33m;[39mo[33m.[39mpush({_tag[33m:[39m[32m"error"[39m[33m,[39mvalue[33m:[39m[33mD[39m})}[33m,[39mf[33m=[39m[33m![39m[33m![39mt[33m?[39m[33m.[39mstartsWith([32m"prisma://"[39m)[33m,[39mh[33m=[39m_r(t)[33m,[39m[33mC[39m[33m=[39m[33m![39m[33m![39me[33m,[39m[33mA[39m[33m=[39mf[33m||[39mh[33m;[39m[33m![39m[33mC[39m[33m&&[39mr[33m&&[39m[33mA[39m[33m&&[39mn[33m!==[39m[32m"client"[39m[33m&&[39mn[33m!==[39m[32m"wasm-compiler-edge"[39m[33m&&[39ms([[32m"recommend--no-engine"[39m[33m,[39m[32m"In production, we recommend using `prisma generate --no-engine` (See: `prisma generate --help`)"[39m])[33m;[39m[36mlet[39m k[33m=[39m[33mA[39m[33m||[39m[33m![39mr[33m;[39m[33mC[39m[33m&&[39m(k[33m||[39mn[33m===[39m[32m"edge"[39m)[33m&&[39m(n[33m===[39m[32m"edge"[39m[33m?[39ma([[32m"Prisma Client was configured to use the `adapter` option but it was imported via its `/edge` endpoint."[39m[33m,[39m[32m"Please either remove the `/edge` endpoint or remove the `adapter` from the Prisma Client constructor."[39m])[33m:[39m[33mA[39m[33m?[39ma([[32m"You've provided both a driver adapter and an Accelerate database URL. Driver adapters currently cannot connect to Accelerate."[39m[33m,[39m[32m"Please provide either a driver adapter with a direct database URL or an Accelerate URL and no driver adapter."[39m])[33m:[39mr[33m||[39ma([[32m"Prisma Client was configured to use the `adapter` option but `prisma generate` was run with `--no-engine`."[39m[33m,[39m[32m"Please run `prisma generate` without `--no-engine` to be able to use Prisma Client with the adapter."[39m]))[33m;[39m[36mlet[39m [33mR[39m[33m=[39m{accelerate[33m:[39mk[33m,[39mppg[33m:[39mh[33m,[39mdriverAdapters[33m:[39m[33mC[39m}[33m;[39m[36mfunction[39m _([33mO[39m){[36mreturn[39m [33mO[39m[33m.[39mlength[33m>[39m[35m0[39m}[36mreturn[39m _(o)[33m?[39m{ok[33m:[39m[33m![39m[35m1[39m[33m,[39mdiagnostics[33m:[39m{warnings[33m:[39mi[33m,[39merrors[33m:[39mo}[33m,[39misUsing[33m:[39m[33mR[39m}[33m:[39m{ok[33m:[39m[33m![39m[35m0[39m[33m,[39mdiagnostics[33m:[39m{warnings[33m:[39mi}[33m,[39misUsing[33m:[39m[33mR[39m}}[36mfunction[39m bo({copyEngine[33m:[39mt[33m=[39m[33m![39m[35m0[39m}[33m,[39me){[36mlet[39m r[33m;[39m[36mtry[39m{r[33m=[39mdr({inlineDatasources[33m:[39me[33m.[39minlineDatasources[33m,[39moverrideDatasources[33m:[39me[33m.[39moverrideDatasources[33m,[39menv[33m:[39m{[33m...[39me[33m.[39menv[33m,[39m[33m...[39mg[33m.[39menv}[33m,[39mclientVersion[33m:[39me[33m.[39mclientVersion})}[36mcatch[39m{}[36mlet[39m{ok[33m:[39mn[33m,[39misUsing[33m:[39mi[33m,[39mdiagnostics[33m:[39mo}[33m=[39mho({url[33m:[39mr[33m,[39madapter[33m:[39me[33m.[39madapter[33m,[39mcopyEngine[33m:[39mt[33m,[39mtargetBuildType[33m:[39m[32m"wasm-engine-edge"[39m})[33m;[39m[36mfor[39m([36mlet[39m [33mA[39m [36mof[39m o[33m.[39mwarnings)at([33m...[39m[33mA[39m[33m.[39mvalue)[33m;[39m[36mif[39m([33m![39mn){[36mlet[39m [33mA[39m[33m=[39mo[33m.[39merrors[[35m0[39m][33m;[39m[36mthrow[39m [36mnew[39m [33mK[39m([33mA[39m[33m.[39mvalue[33m,[39m{clientVersion[33m:[39me[33m.[39mclientVersion})}[36mlet[39m s[33m=[39m[33mNe[39m(e[33m.[39mgenerator)[33m,[39ma[33m=[39ms[33m===[39m[32m"library"[39m[33m,[39mf[33m=[39ms[33m===[39m[32m"binary"[39m[33m,[39mh[33m=[39ms[33m===[39m[32m"client"[39m[33m,[39m[33mC[39m[33m=[39m(i[33m.[39maccelerate[33m||[39mi[33m.[39mppg)[33m&&[39m[33m![39mi[33m.[39mdriverAdapters[33m;[39m[36mreturn[39m i[33m.[39maccelerate[33m,[39mi[33m.[39mdriverAdapters[33m?[39m[36mnew[39m [33mTt[39m(e)[33m:[39mi[33m.[39maccelerate[33m?[39m[36mnew[39m fr(e)[33m:[39m[36mnew[39m sn({clientVersion[33m:[39me[33m.[39mclientVersion})}[36mvar[39m sn[33m=[39m[36mclass[39m{constructor(e){[36mreturn[39m [36mnew[39m [33mProxy[39m([36mthis[39m[33m,[39m{[36mget[39m(r[33m,[39mn){[36mlet[39m i[33m=[39m[32m`In order to run Prisma Client on edge runtime, either:[39m
 [90m 17 |[39m [32m- Use Prisma Accelerate: https://pris.ly/d/accelerate[39m[0m

A Node.js API is used (setImmediate at line: 14) which is not supported in the Edge Runtime.
Learn more: https://nextjs.org/docs/api-reference/edge-runtime

Import trace:
  Edge Middleware:
    ./src/lib/prisma/generated/runtime/wasm-engine-edge.js
    ./src/lib/prisma/generated/wasm.js
    ./src/lib/prisma/generated/default.js
    ./src/lib/prisma/connection.ts
    ./src/lib/prisma/permission-queries.ts
    ./src/middleware.ts


 âš  ./src/lib/utils/session-utils.ts:6:1
Ecmascript file had an error
[0m [90m 4 |[39m [90m */[39m
 [90m 5 |[39m
[31m[1m>[22m[39m[90m 6 |[39m [36mimport[39m { randomUUID } [36mfrom[39m [32m"crypto"[39m
 [90m   |[39m [31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m[31m[1m^[22m[39m
 [90m 7 |[39m
 [90m 8 |[39m [90m/**[39m
 [90m 9 |[39m [90m * Genera un ID Ãºnico para una sesiÃ³n[39m[0m

A Node.js module is loaded ('crypto' at line 6) which is not supported in the Edge Runtime.
Learn More: https://nextjs.org/docs/messages/node-module-in-edge-runtime

Import trace:
  Edge Middleware:
    ./src/lib/utils/session-utils.ts
    ./src/lib/auth.ts
    ./src/middleware.ts


 HEAD /users 404 in 89ms
[?25h
